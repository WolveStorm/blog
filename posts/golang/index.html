<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='GRPCÁöÑÁ¨îËÆ∞'>
<title>GRPC</title>

<link rel='canonical' href='https://wolvestorm.github.io/blog/posts/golang/'>

<link rel="stylesheet" href="/blog/scss/style.min.5be32ca3f6e1a997c75795c4359147cc6d4fbd34948c0acd51e31d237033978a.css"><meta property='og:title' content='GRPC'>
<meta property='og:description' content='GRPCÁöÑÁ¨îËÆ∞'>
<meta property='og:url' content='https://wolvestorm.github.io/blog/posts/golang/'>
<meta property='og:site_name' content='ËèúGOÁöÑÂçöÂÆ¢'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='Golang' /><meta property='article:tag' content='GRPC' /><meta property='article:published_time' content='2023-01-06T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2023-01-06T00:00:00&#43;00:00'/><meta property='og:image' content='https://wolvestorm.github.io/blog/posts/golang/grpc.jpeg' />
<meta name="twitter:title" content="GRPC">
<meta name="twitter:description" content="GRPCÁöÑÁ¨îËÆ∞"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://wolvestorm.github.io/blog/posts/golang/grpc.jpeg' />
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/blog/">
                
                    
                    
                    
                        
                        <img src="/blog/img/avatar_hu8b46cb020651f4f5a46bc8297d5d9089_86497_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/blog">ËèúGOÁöÑÂçöÂÆ¢</a></h1>
            <h2 class="site-description">A Blog Of Vegetable Gopher</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/CaiJimmy/hugo-theme-stack'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://weibo.com/u/6116124329'
                        target="_blank"
                        title="Weibo"
                        rel="me"
                    >
                        
                        
                            <svg viewBox="0 0 32 32" style="width:1em;height:1em;vertical-align:middle" xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" overflow="hidden"><path fill="currentColor" d="M22.4 8.891c.754 1.074 3.52.046 3.909 2.4.251 1.554 0 2.309.983 2.217.894-.069 2.446-3.017-.32-5.12-3.017-2.263-5.166-.389-4.571.503zm-.731-4.937c.32 1.143 2.741.777 4.638 1.166.937.183 2.651 1.326 3.451 4.114.802 2.789-1.003 5.349.937 5.577 1.6.206 1.465-5.029.937-6.743-.549-1.737-2.24-4.503-5.646-5.44-3.403-.937-4.661.137-4.318 1.326zM7.291 22.037c.389 2.398 3.109 3.952 6.034 3.474 2.857-.457 4.8-2.697 4.434-5.003-.389-2.313-2.949-3.867-5.806-3.502-2.926.366-5.051 2.629-4.663 5.031zm1.532.294c-.16-.914.526-1.826 1.577-2.034 1.029-.206 2.011.366 2.194 1.278.16.937-.526 1.831-1.577 2.037-1.029.229-2.011-.366-2.194-1.28zm6.88-10.445c-.48-.503 1.371-2.994-.343-4.411-1.943-1.623-6.469.48-10.354 3.977C1.097 14.949-.548 18.949.16 22.469c.686 3.543 7.177 7.909 16.251 7.131 9.074-.779 12.526-7.819 12.094-10.583-.437-2.743-3.088-2.951-3.771-3.086-.711-.137-2.08-.046-1.054-1.371 1.054-1.349.549-3.063-.8-3.634-1.326-.549-3.634-.069-4.709.434-1.44.686-2.469.526-2.469.526zm-12.069 9.6c-.389-3.451 3.566-7.017 8.914-7.726 5.349-.686 10.469 1.783 10.834 5.237.389 3.449-4.046 7.381-9.394 8.066-5.326.688-9.966-2.126-10.354-5.577z"/></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://user.qzone.qq.com/892552140/infocenter'
                        target="_blank"
                        title="qq"
                        rel="me"
                    >
                        
                        
                            <svg viewBox="0 0 32 32" style="width:1em;height:1em;vertical-align:middle" xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" overflow="hidden"><path fill="currentColor" d="M16 0l-4.937 10.537L0 12.228l8 8.183L6.103 32 16 26.535 25.897 32l-1.6-9.714c-4.343.594-9.44 1.003-14.88.297l8.869-6.857s-5.143-.869-11.154-1.737c0 0 8.594-1.851 17.872-.274l-9.438 6.718s3.566 1.006 8.571.848L24 20.412l8-8.183-11.063-1.691L16 .001z"/></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/blog/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/blog/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/blog/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/blog/%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>ÈìæÊé•</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://wolvestorm.github.io/blog/en/" >English</option>
                        
                            <option value="https://wolvestorm.github.io/blog/" selected>‰∏≠Êñá</option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>ÊöóËâ≤Ê®°Âºè</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#ÂàùËØÜprotobuffer">ÂàùËØÜprotobuffer</a>
      <ol>
        <li><a href="#Á¨¨‰∏Ä‰∏™proto">Á¨¨‰∏Ä‰∏™proto</a></li>
        <li><a href="#ÁîüÊàêgoÊñá‰ª∂">ÁîüÊàêgoÊñá‰ª∂</a></li>
        <li><a href="#ÁîüÊàêÁöÑpbgoÊñá‰ª∂">ÁîüÊàêÁöÑpb.goÊñá‰ª∂</a></li>
        <li><a href="#Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ">Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ</a></li>
        <li><a href="#protoÂíåjsonÁöÑÁõ∏‰∫íËΩ¨Êç¢">protoÂíåjsonÁöÑÁõ∏‰∫íËΩ¨Êç¢</a></li>
        <li><a href="#Âú®protobuffer‰∏≠ÂÆö‰πâÊúçÂä°">Âú®protobuffer‰∏≠ÂÆö‰πâÊúçÂä°</a></li>
      </ol>
    </li>
    <li><a href="#ÂàùËØÜrpc">ÂàùËØÜrpc</a>
      <ol>
        <li><a href="#rpcÁöÑÁªÑÊàê">rpcÁöÑÁªÑÊàê</a></li>
        <li><a href="#rpcÁöÑÂéüÁêÜ">rpcÁöÑÂéüÁêÜ</a></li>
        <li><a href="#goÂÆûÁé∞rpc">goÂÆûÁé∞rpc</a>
          <ol>
            <li><a href="#ÊúçÂä°ÂÆö‰πâÂíåÊö¥Èú≤">ÊúçÂä°ÂÆö‰πâÂíåÊö¥Èú≤</a></li>
            <li><a href="#Ê≥®ÂÜåÊúçÂä°ÂíåÁõëÂê¨">Ê≥®ÂÜåÊúçÂä°ÂíåÁõëÂê¨</a></li>
            <li><a href="#ÂÆ¢Êà∑Á´ØË∞ÉÁî®">ÂÆ¢Êà∑Á´ØË∞ÉÁî®</a></li>
          </ol>
        </li>
        <li><a href="#rpcÂíåprotobuffer">rpcÂíåprotobuffer</a></li>
      </ol>
    </li>
    <li><a href="#ÂàùËØÜgrpc">ÂàùËØÜgrpc</a>
      <ol>
        <li><a href="#ÂæóÂà∞grpc">ÂæóÂà∞grpc</a></li>
        <li><a href="#grpcÁöÑ‰ΩøÁî®">grpcÁöÑ‰ΩøÁî®</a>
          <ol>
            <li><a href="#grpcÁºñËØëÊîØÊåÅ">gRPCÁºñËØëÊîØÊåÅ</a></li>
            <li><a href="#ÂÆûÁé∞rpcÊúçÂä°">ÂÆûÁé∞rpcÊúçÂä°</a></li>
            <li><a href="#grpcÂÆûÁé∞ÊúçÂä°Âô®">grpcÂÆûÁé∞ÊúçÂä°Âô®</a></li>
            <li><a href="#grpcÂÆûÁé∞ÂÆ¢Êà∑Á´Ø">grpcÂÆûÁé∞ÂÆ¢Êà∑Á´Ø</a></li>
          </ol>
        </li>
        <li><a href="#grpcÁöÑÊµÅÊ®°Âºè">grpcÁöÑÊµÅÊ®°Âºè</a>
          <ol>
            <li><a href="#ÊúçÂä°Âô®ÊµÅÂΩ¢Âºè">ÊúçÂä°Âô®ÊµÅÂΩ¢Âºè</a></li>
            <li><a href="#ÂÆ¢Êà∑Á´ØÊµÅÊ®°Âºè">ÂÆ¢Êà∑Á´ØÊµÅÊ®°Âºè</a></li>
            <li><a href="#ÂèåÂêëÊµÅÊ®°Âºè">ÂèåÂêëÊµÅÊ®°Âºè</a></li>
          </ol>
        </li>
        <li><a href="#grpcÈ™åËØÅ">grpcÈ™åËØÅ</a>
          <ol>
            <li><a href="#Âü∫‰∫étoken">Âü∫‰∫étoken</a></li>
            <li><a href="#ÊúçÂä°Âô®-1">ÊúçÂä°Âô®</a></li>
            <li><a href="#ÂÆ¢Êà∑Á´Ø-1">ÂÆ¢Êà∑Á´Ø</a></li>
          </ol>
        </li>
        <li><a href="#grpcÊã¶Êà™Âô®">grpcÊã¶Êà™Âô®</a>
          <ol>
            <li><a href="#ÊúçÂä°Âô®-2">ÊúçÂä°Âô®</a></li>
            <li><a href="#ÂÆ¢Êà∑Á´Ø-2">ÂÆ¢Êà∑Á´Ø</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/blog/posts/golang/">
                <img src="/blog/posts/golang/grpc_hu1eee0aeb00d0db40f03f5ec8233f4563_83469_800x0_resize_q75_box.jpeg"
                        srcset="/blog/posts/golang/grpc_hu1eee0aeb00d0db40f03f5ec8233f4563_83469_800x0_resize_q75_box.jpeg 800w, /blog/posts/golang/grpc_hu1eee0aeb00d0db40f03f5ec8233f4563_83469_1600x0_resize_q75_box.jpeg 1600w"
                        width="800" 
                        height="339" 
                        loading="lazy"
                        alt="Featured image of post GRPC" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/blog/categories/golang/" >
                Golang
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/blog/posts/golang/">GRPC</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            GRPCÁöÑÁ¨îËÆ∞
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 06, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 29 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="grpc">grpc</h1>
<h2 id="ÂàùËØÜprotobuffer">ÂàùËØÜprotobuffer</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go get -u github.com/golang/protobuf/protoc-gen-go
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Á¨¨‰∏Ä‰∏™proto">Á¨¨‰∏Ä‰∏™proto</h3>
<p>protoÊñá‰ª∂ÈÉΩÈúÄË¶Å‰ª•.proto‰Ωú‰∏∫ÂêéÁºÄ„ÄÇ</p>
<p>‰∏ãÈù¢Â∞±ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑprotobufferÔºåname = 1‰∏çÊòØÊåá‰ªñÁöÑÂÄºÊòØ1ÔºåËÄåÊòØÊåá‰ªñÂú®Person‰∏≠ÁöÑÂ∫èÂè∑ÊòØ1.</p>
<p>option go_package = &ldquo;path;package&rdquo;</p>
<p>path‰ª£Ë°®ÁîüÊàêÁöÑgoÊñá‰ª∂Âú®ÂΩìÂâçÁõÆÂΩïÔºåpackage‰ª£Ë°®ÂåÖ‰∏∫first„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-protobuf" data-lang="protobuf"><span class="line"><span class="cl"><span class="n">syntax</span> <span class="o">=</span> <span class="s">&#34;proto3&#34;</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">option</span> <span class="n">go_package</span><span class="o">=</span><span class="s">&#34;./;first&#34;</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="kn">package</span> <span class="nn">first</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="kd">message</span> <span class="nc">Person</span><span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">name</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">int32</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">email</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kd">enum</span> <span class="n">status</span><span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="n">CHILD</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="n">ADULT</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="n">OLD</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="p">}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">}</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÁîüÊàêgoÊñá‰ª∂">ÁîüÊàêgoÊñá‰ª∂</h3>
<blockquote>
<p>protoc &ndash;go_out= . ./*.proto</p>
</blockquote>
<h3 id="ÁîüÊàêÁöÑpbgoÊñá‰ª∂">ÁîüÊàêÁöÑpb.goÊñá‰ª∂</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Code generated by protoc-gen-go. DO NOT EDIT.
</span></span></span><span class="line"><span class="cl"><span class="c1">// versions:
</span></span></span><span class="line"><span class="cl"><span class="c1">// 	protoc-gen-go v1.28.0
</span></span></span><span class="line"><span class="cl"><span class="c1">// 	protoc        v3.20.0
</span></span></span><span class="line"><span class="cl"><span class="c1">// source: person.proto
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">first</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">protoreflect</span> <span class="s">&#34;google.golang.org/protobuf/reflect/protoreflect&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">protoimpl</span> <span class="s">&#34;google.golang.org/protobuf/runtime/protoimpl&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">reflect</span> <span class="s">&#34;reflect&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sync</span> <span class="s">&#34;sync&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Verify that this generated code is sufficiently up-to-date.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">_</span> <span class="p">=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nf">EnforceVersion</span><span class="p">(</span><span class="mi">20</span> <span class="o">-</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">MinVersion</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Verify that runtime/protoimpl is sufficiently up-to-date.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">_</span> <span class="p">=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nf">EnforceVersion</span><span class="p">(</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nx">MaxVersion</span> <span class="o">-</span> <span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">PersonStatus</span> <span class="kt">int32</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person_CHILD</span> <span class="nx">PersonStatus</span> <span class="p">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person_ADULT</span> <span class="nx">PersonStatus</span> <span class="p">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person_OLD</span>   <span class="nx">PersonStatus</span> <span class="p">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Enum value maps for PersonStatus.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">PersonStatus_name</span> <span class="p">=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">int32</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="mi">0</span><span class="p">:</span> <span class="s">&#34;CHILD&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mi">1</span><span class="p">:</span> <span class="s">&#34;ADULT&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mi">2</span><span class="p">:</span> <span class="s">&#34;OLD&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">PersonStatus_value</span> <span class="p">=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int32</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;CHILD&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;ADULT&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;OLD&#34;</span><span class="p">:</span>   <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="nx">PersonStatus</span><span class="p">)</span> <span class="nf">Enum</span><span class="p">()</span> <span class="o">*</span><span class="nx">PersonStatus</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">PersonStatus</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="o">*</span><span class="nx">p</span> <span class="p">=</span> <span class="nx">x</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">p</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="nx">PersonStatus</span><span class="p">)</span> <span class="nf">String</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nf">EnumStringOf</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nf">Descriptor</span><span class="p">(),</span> <span class="nx">protoreflect</span><span class="p">.</span><span class="nf">EnumNumber</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">PersonStatus</span><span class="p">)</span> <span class="nf">Descriptor</span><span class="p">()</span> <span class="nx">protoreflect</span><span class="p">.</span><span class="nx">EnumDescriptor</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">file_person_proto_enumTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">Descriptor</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">PersonStatus</span><span class="p">)</span> <span class="nf">Type</span><span class="p">()</span> <span class="nx">protoreflect</span><span class="p">.</span><span class="nx">EnumType</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">file_person_proto_enumTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="nx">PersonStatus</span><span class="p">)</span> <span class="nf">Number</span><span class="p">()</span> <span class="nx">protoreflect</span><span class="p">.</span><span class="nx">EnumNumber</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">protoreflect</span><span class="p">.</span><span class="nf">EnumNumber</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Deprecated: Use PersonStatus.Descriptor instead.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">PersonStatus</span><span class="p">)</span> <span class="nf">EnumDescriptor</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nf">file_person_proto_rawDescGZIP</span><span class="p">(),</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">state</span>         <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">MessageState</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sizeCache</span>     <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">SizeCache</span>
</span></span><span class="line"><span class="cl">	<span class="nx">unknownFields</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">UnknownFields</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">Name</span>  <span class="kt">string</span> <span class="s">`protobuf:&#34;bytes,1,opt,name=name,proto3&#34; json:&#34;name,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Age</span>   <span class="kt">int32</span>  <span class="s">`protobuf:&#34;varint,2,opt,name=age,proto3&#34; json:&#34;age,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Email</span> <span class="kt">string</span> <span class="s">`protobuf:&#34;bytes,3,opt,name=email,proto3&#34; json:&#34;email,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">Reset</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="o">*</span><span class="nx">x</span> <span class="p">=</span> <span class="nx">Person</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">UnsafeEnabled</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">mi</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">file_person_proto_msgTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ms</span> <span class="o">:=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nf">MessageStateOf</span><span class="p">(</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nf">Pointer</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ms</span><span class="p">.</span><span class="nf">StoreMessageInfo</span><span class="p">(</span><span class="nx">mi</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">String</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nf">MessageStringOf</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">ProtoMessage</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">ProtoReflect</span><span class="p">()</span> <span class="nx">protoreflect</span><span class="p">.</span><span class="nx">Message</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">mi</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">file_person_proto_msgTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">UnsafeEnabled</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ms</span> <span class="o">:=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nf">MessageStateOf</span><span class="p">(</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nf">Pointer</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">ms</span><span class="p">.</span><span class="nf">LoadMessageInfo</span><span class="p">()</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">ms</span><span class="p">.</span><span class="nf">StoreMessageInfo</span><span class="p">(</span><span class="nx">mi</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">ms</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">mi</span><span class="p">.</span><span class="nf">MessageOf</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Deprecated: Use Person.ProtoReflect.Descriptor instead.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">Descriptor</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nf">file_person_proto_rawDescGZIP</span><span class="p">(),</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">GetName</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">Name</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">GetAge</span><span class="p">()</span> <span class="kt">int32</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">Age</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">GetEmail</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">Email</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">File_person_proto</span> <span class="nx">protoreflect</span><span class="p">.</span><span class="nx">FileDescriptor</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">file_person_proto_rawDesc</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x66</span><span class="p">,</span> <span class="mh">0x69</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x67</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x67</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x69</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x69</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x75</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x43</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x4c</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x55</span><span class="p">,</span> <span class="mh">0x4c</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x4c</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x5a</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="mh">0x66</span><span class="p">,</span> <span class="mh">0x69</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x62</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">file_person_proto_rawDescOnce</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">Once</span>
</span></span><span class="line"><span class="cl">	<span class="nx">file_person_proto_rawDescData</span> <span class="p">=</span> <span class="nx">file_person_proto_rawDesc</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">file_person_proto_rawDescGZIP</span><span class="p">()</span> <span class="p">[]</span><span class="kt">byte</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">file_person_proto_rawDescOnce</span><span class="p">.</span><span class="nf">Do</span><span class="p">(</span><span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">file_person_proto_rawDescData</span> <span class="p">=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nf">CompressGZIP</span><span class="p">(</span><span class="nx">file_person_proto_rawDescData</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">})</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">file_person_proto_rawDescData</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">file_person_proto_enumTypes</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nx">EnumInfo</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">file_person_proto_msgTypes</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nx">MessageInfo</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">file_person_proto_goTypes</span> <span class="p">=</span> <span class="p">[]</span><span class="kd">interface</span><span class="p">{}{</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nx">PersonStatus</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="c1">// 0: first.Person.status
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">(</span><span class="o">*</span><span class="nx">Person</span><span class="p">)(</span><span class="kc">nil</span><span class="p">),</span>    <span class="c1">// 1: first.Person
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">file_person_proto_depIdxs</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">int32</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="mi">0</span><span class="p">,</span> <span class="c1">// [0:0] is the sub-list for method output_type
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="mi">0</span><span class="p">,</span> <span class="c1">// [0:0] is the sub-list for method input_type
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="mi">0</span><span class="p">,</span> <span class="c1">// [0:0] is the sub-list for extension type_name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="mi">0</span><span class="p">,</span> <span class="c1">// [0:0] is the sub-list for extension extendee
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="mi">0</span><span class="p">,</span> <span class="c1">// [0:0] is the sub-list for field type_name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span> <span class="nf">file_person_proto_init</span><span class="p">()</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">file_person_proto_init</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">File_person_proto</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">!</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nx">UnsafeEnabled</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">file_person_proto_msgTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">Exporter</span> <span class="p">=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">v</span> <span class="kd">interface</span><span class="p">{},</span> <span class="nx">i</span> <span class="kt">int</span><span class="p">)</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">switch</span> <span class="nx">v</span> <span class="o">:=</span> <span class="nx">v</span><span class="p">.(</span><span class="o">*</span><span class="nx">Person</span><span class="p">);</span> <span class="nx">i</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">case</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="o">&amp;</span><span class="nx">v</span><span class="p">.</span><span class="nx">state</span>
</span></span><span class="line"><span class="cl">			<span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="o">&amp;</span><span class="nx">v</span><span class="p">.</span><span class="nx">sizeCache</span>
</span></span><span class="line"><span class="cl">			<span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="o">&amp;</span><span class="nx">v</span><span class="p">.</span><span class="nx">unknownFields</span>
</span></span><span class="line"><span class="cl">			<span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">type</span> <span class="nx">x</span> <span class="kd">struct</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">out</span> <span class="o">:=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">TypeBuilder</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">File</span><span class="p">:</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">DescBuilder</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">GoPackagePath</span><span class="p">:</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">TypeOf</span><span class="p">(</span><span class="nx">x</span><span class="p">{}).</span><span class="nf">PkgPath</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">			<span class="nx">RawDescriptor</span><span class="p">:</span> <span class="nx">file_person_proto_rawDesc</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">NumEnums</span><span class="p">:</span>      <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">NumMessages</span><span class="p">:</span>   <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">NumExtensions</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">NumServices</span><span class="p">:</span>   <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="nx">GoTypes</span><span class="p">:</span>           <span class="nx">file_person_proto_goTypes</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">DependencyIndexes</span><span class="p">:</span> <span class="nx">file_person_proto_depIdxs</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">EnumInfos</span><span class="p">:</span>         <span class="nx">file_person_proto_enumTypes</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">MessageInfos</span><span class="p">:</span>      <span class="nx">file_person_proto_msgTypes</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}.</span><span class="nf">Build</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">File_person_proto</span> <span class="p">=</span> <span class="nx">out</span><span class="p">.</span><span class="nx">File</span>
</span></span><span class="line"><span class="cl">	<span class="nx">file_person_proto_rawDesc</span> <span class="p">=</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nx">file_person_proto_goTypes</span> <span class="p">=</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nx">file_person_proto_depIdxs</span> <span class="p">=</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ">Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/golang/protobuf/proto&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;phm&#34;</span><span class="p">,</span><span class="nx">Age</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span><span class="nx">Email</span><span class="p">:</span> <span class="s">&#34;8888888@qq.com&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//Â∫èÂàóÂåñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">marshal</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">proto</span><span class="p">.</span><span class="nf">Marshal</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">marshal</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">newP</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//ÂèçÂ∫èÂàóÂåñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">_</span> <span class="p">=</span> <span class="nx">proto</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">(</span><span class="nx">marshal</span><span class="p">,</span> <span class="nx">newP</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">newP</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="protoÂíåjsonÁöÑÁõ∏‰∫íËΩ¨Êç¢">protoÂíåjsonÁöÑÁõ∏‰∫íËΩ¨Êç¢</h3>
<p>È¶ñÂÖàÂÆâË£Ö‰∏Ä‰∏™ÂåÖ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">go</span> <span class="nx">get</span> <span class="nx">google</span><span class="p">.</span><span class="nx">golang</span><span class="p">.</span><span class="nx">org</span><span class="o">/</span><span class="nx">protobuf</span><span class="o">/</span><span class="nx">encoding</span><span class="o">/</span><span class="nx">protojson</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;google.golang.org/protobuf/encoding/protojson&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Name</span><span class="p">:</span>  <span class="s">&#34;phm&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Age</span><span class="p">:</span>   <span class="mi">13</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Email</span><span class="p">:</span> <span class="s">&#34;999999@qq.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">format</span> <span class="o">:=</span> <span class="nx">protojson</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nf">ProtoReflect</span><span class="p">().</span><span class="nf">Interface</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">format</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">message</span> <span class="o">:=</span> <span class="nx">p</span><span class="p">.</span><span class="nf">ProtoReflect</span><span class="p">().</span><span class="nf">Interface</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">_</span> <span class="p">=</span> <span class="nx">protojson</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">format</span><span class="p">),</span> <span class="nx">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Âú®protobuffer‰∏≠ÂÆö‰πâÊúçÂä°">Âú®protobuffer‰∏≠ÂÆö‰πâÊúçÂä°</h3>
<p>Â¶ÇÊûú‰Ω†ÊÉ≥Âú®RPC(ËøúÁ®ãËøáÁ®ãË∞ÉÁî®ÔºâÁ≥ªÁªü‰∏≠‰ΩøÁî®‰Ω†ÁöÑÊ∂àÊÅØÁ±ªÂûãÔºå‰Ω†ÂèØ‰ª•Âú®‰∏Ä‰∏™.protoÊñá‰ª∂‰∏≠ÂÆö‰πâ‰∏Ä‰∏™RPCÊúçÂä°Êé•Âè£ÔºåÂπ∂‰∏îProtocol BuffersÁºñËØëÂô®Â∞Ü‰ª•‰Ω†ÈÄâÊã©ÁöÑËØ≠Ë®ÄÁîüÊàêÊúçÂä°Êé•Âè£‰ª£Á†ÅÂíåÂ≠òÊ†π„ÄÇÂõ†Ê≠§Ôºå‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥ÂÆö‰πâ‰∏Ä‰∏™RPCÊúçÂä°ÔºåÂÆÉÁöÑÊñπÊ≥ïÊé•Âèó‰Ω†ÁöÑSeanchRequestÂπ∂ËøîÂõû‰∏Ä‰∏™SeanchResponseÔºå‰Ω†ÂèØ‰ª•Âú®‰Ω†ÁöÑ.protoÊñá‰ª∂‰∏≠ÂÆö‰πâÂÆÉÔºåÂ¶Ç‰∏ãÊâÄÁ§∫:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-protobuf" data-lang="protobuf"><span class="line"><span class="cl"><span class="kd">service</span> <span class="n">RpcService</span><span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="k">rpc</span> <span class="n">Search</span><span class="p">(</span><span class="n">Person</span><span class="p">)</span> <span class="k">returns</span> <span class="p">(</span><span class="n">Person</span><span class="p">);</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="k">rpc</span> <span class="n">register</span><span class="p">(</span><span class="n">Person</span><span class="p">)</span> <span class="k">returns</span> <span class="p">(</span><span class="n">Person</span><span class="p">);</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">}</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂàùËØÜrpc">ÂàùËØÜrpc</h2>
<p>Âú®‰∏äËø∞Êú¨Âú∞ËøáÁ®ãË∞ÉÁî®ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨ÊòØÂú®‰∏ÄÂè∞ËÆ°ÁÆóÊú∫‰∏äÊâßË°å‰∫ÜËÆ°ÁÆóÊú∫‰∏äÁöÑÁ®ãÂ∫èÔºåÂÆåÊàêË∞ÉÁî®„ÄÇÈöèÁùÄËÆ°ÁÆóÊú∫ÊäÄÊúØÁöÑÂèëÂ±ïÂíåÈúÄÊ±ÇÂú∫ÊôØÁöÑÂèòÂåñÔºåÊúâÊó∂Â∞±ÈúÄË¶Å‰ªé‰∏ÄÂè∞ËÆ°ÁÆóÊú∫‰∏äÊâßË°åÂè¶Â§ñ‰∏ÄÂè∞ËÆ°ÁÆóÊú∫‰∏äÁöÑÁ®ãÂ∫èÁöÑÈúÄÊ±ÇÔºåÂõ†Ê≠§ÂêéÊù•ÂèàÂèëÂ±ïÂá∫Êù•‰∫ÜRPCÊäÄÊúØ„ÄÇÁâπÂà´ÊòØÁõÆÂâçÈöèÁùÄ‰∫íËÅîÁΩëÊäÄÊúØÁöÑÂø´ÈÄüËø≠‰ª£ÂíåÂèëÂ±ïÔºåÁî®Êà∑ÂíåÈúÄÊ±ÇÂá†‰πéÈÉΩÊòØ‰ª•ÊåáÊï∞ÂºèÁöÑÊñπÂºèÂú®È´òÈÄüÂ¢ûÈïøÔºåËøô‰∏™Êó∂ÂÄôÁªùÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÁ®ãÂ∫èÈÉΩÊòØ<strong>ÈÉ®ÁΩ≤Âú®Â§öÂè∞Êú∫Âô®‰∏ä</strong>ÔºåÂ∞±ÈúÄË¶ÅÂú®<strong>Ë∞ÉÁî®</strong>ÂÖ∂‰ªñÁâ©ÁêÜÊú∫Âô®‰∏äÁöÑÁ®ãÂ∫èÁöÑÊÉÖÂÜµ„ÄÇ</p>
<p>RPCÊòØRemote Procedure Call ProtocolÂçïËØçÈ¶ñÂ≠óÊØçÁöÑÁº©ÂÜôÔºåÁÆÄÁß∞‰∏∫ÔºöRPCÔºåÁøªËØëÊàê‰∏≠ÊñáÂè´ËøúÁ®ãËøáÁ®ãË∞ÉÁî®ÂçèËÆÆ„ÄÇÊâÄË∞ìËøúÁ®ãËøáÁ®ãË∞ÉÁî®ÔºåÈÄö‰øóÁöÑÁêÜËß£Â∞±ÊòØÂèØ‰ª•Âú®Êú¨Âú∞Á®ãÂ∫è‰∏≠Ë∞ÉÁî®ËøêË°åÂú®Âè¶Â§ñ‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÁöÑÁ®ãÂ∫èÁöÑÂäüËÉΩÊñπÊ≥ï„ÄÇËøôÁßçË∞ÉÁî®ÁöÑËøáÁ®ãË∑®Ë∂ä‰∫ÜÁâ©ÁêÜÊúçÂä°Âô®ÁöÑÈôêÂà∂ÔºåÊòØÂú®ÁΩëÁªú‰∏≠ÂÆåÊàêÁöÑÔºåÂú®Ë∞ÉÁî®ËøúÁ´ØÊúçÂä°Âô®‰∏äÁ®ãÂ∫èÁöÑËøáÁ®ã‰∏≠ÔºåÊú¨Âú∞Á®ãÂ∫èÁ≠âÂæÖËøîÂõûË∞ÉÁî®ÁªìÊûúÔºåÁõ¥Âà∞ËøúÁ´ØÁ®ãÂ∫èÊâßË°åÂÆåÊØïÔºåÂ∞ÜÁªìÊûúËøõË°åËøîÂõûÂà∞Êú¨Âú∞ÔºåÊúÄÁªàÂÆåÊàê‰∏ÄÊ¨°ÂÆåÊï¥ÁöÑË∞ÉÁî®„ÄÇ</p>
<p>ÈúÄË¶ÅÂº∫Ë∞ÉÁöÑÊòØÔºö<strong>ËøúÁ®ãËøáÁ®ãË∞ÉÁî®ÊåáÁöÑÊòØË∞ÉÁî®ËøúÁ´ØÊúçÂä°Âô®‰∏äÁöÑÁ®ãÂ∫èÁöÑÊñπÊ≥ïÊï¥‰∏™ËøáÁ®ã„ÄÇ</strong></p>
<h3 id="rpcÁöÑÁªÑÊàê">rpcÁöÑÁªÑÊàê</h3>
<p>RPCÊäÄÊúØÂú®Êû∂ÊûÑËÆæËÆ°‰∏äÊúâÂõõÈÉ®ÂàÜÁªÑÊàêÔºåÂàÜÂà´ÊòØÔºö<strong>ÂÆ¢Êà∑Á´Ø„ÄÅÂÆ¢Êà∑Á´ØÂ≠òÊ†π„ÄÅÊúçÂä°Á´Ø„ÄÅÊúçÂä°Á´ØÂ≠òÊ†π„ÄÇ</strong></p>
<p>ËøôÈáåÊèêÂà∞‰∫Ü<strong>ÂÆ¢Êà∑Á´Ø</strong>Âíå<strong>ÊúçÂä°Á´Ø</strong>ÁöÑÊ¶ÇÂøµÔºåÂÖ∂Â±û‰∫éÁ®ãÂ∫èËÆæËÆ°Êû∂ÊûÑÁöÑ‰∏ÄÁßçÊñπÂºèÔºåÂú®Áé∞‰ª£ÁöÑËÆ°ÁÆóÊú∫ËΩØ‰ª∂Á®ãÂ∫èÊû∂ÊûÑËÆæËÆ°‰∏äÔºåÂ§ßÊñπÂêë‰∏äÂàÜ‰∏∫‰∏§ÁßçÊñπÂêëÔºåÂàÜÂà´ÊòØÔºö<strong>B/SÊû∂ÊûÑ</strong>„ÄÅ<strong>C/SÊû∂ÊûÑ</strong>„ÄÇB/SÊû∂ÊûÑÊåáÁöÑÊòØÊµèËßàÂô®Âà∞ÊúçÂä°Âô®‰∫§‰∫íÁöÑÊû∂ÊûÑÊñπÂºèÔºåÂè¶Â§ñ‰∏ÄÁßçÊòØÂú®ËÆ°ÁÆóÊú∫‰∏äÂÆâË£Ö‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ∫îÁî®ÔºåÁß∞‰πã‰∏∫ÂÆ¢Êà∑Á´ØÔºå‰∏éÊúçÂä°Âô®‰∫§‰∫íÁöÑÊ®°Âºè„ÄÇ</p>
<p>Áî±‰∫éÂú®ÊúçÂä°ÁöÑË∞ÉÁî®ËøáÁ®ã‰∏≠ÔºåÊúâ‰∏ÄÊñπÊòØÂèëËµ∑Ë∞ÉÁî®ÊñπÔºåÂè¶‰∏ÄÊñπÊòØÊèê‰æõÊúçÂä°Êñπ„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ÊääÊúçÂä°ÂèëËµ∑ÊñπÁß∞‰πã‰∏∫ÂÆ¢Êà∑Á´ØÔºåÊääÊúçÂä°Êèê‰æõÊñπÁß∞‰πã‰∏∫ÊúçÂä°Á´Ø„ÄÇ‰ª•‰∏ãÊòØÂØπRPCÁöÑÂõõÁßçËßíËâ≤ÁöÑËß£ÈáäÂíåËØ¥ÊòéÔºö</p>
<ul>
<li>**ÂÆ¢Êà∑Á´Ø(Client)Ôºö**ÊúçÂä°Ë∞ÉÁî®ÂèëËµ∑ÊñπÔºå‰πüÁß∞‰∏∫ÊúçÂä°Ê∂àË¥πËÄÖ„ÄÇ</li>
<li>**ÂÆ¢Êà∑Á´ØÂ≠òÊ†π(Client Stub)Ôºö**ËØ•Á®ãÂ∫èËøêË°åÂú®ÂÆ¢Êà∑Á´ØÊâÄÂú®ÁöÑËÆ°ÁÆóÊú∫Êú∫Âô®‰∏äÔºå‰∏ªË¶ÅÁî®Êù•Â≠òÂÇ®Ë¶ÅË∞ÉÁî®ÁöÑÊúçÂä°Âô®ÁöÑÂú∞ÂùÄÔºåÂè¶Â§ñÔºåËØ•Á®ãÂ∫èËøòË¥üË¥£Â∞ÜÂÆ¢Êà∑Á´ØËØ∑Ê±ÇËøúÁ´ØÊúçÂä°Âô®Á®ãÂ∫èÁöÑÊï∞ÊçÆ‰ø°ÊÅØÊâìÂåÖÊàêÊï∞ÊçÆÂåÖÔºåÈÄöËøáÁΩëÁªúÂèëÈÄÅÁªôÊúçÂä°Á´ØStubÁ®ãÂ∫èÔºõÂÖ∂Ê¨°ÔºåËøòË¶ÅÊé•Êî∂ÊúçÂä°Á´ØStubÁ®ãÂ∫èÂèëÈÄÅÁöÑË∞ÉÁî®ÁªìÊûúÊï∞ÊçÆÂåÖÔºåÂπ∂Ëß£ÊûêËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</li>
<li>**ÊúçÂä°Á´Ø(Server)Ôºö**ËøúÁ´ØÁöÑËÆ°ÁÆóÊú∫Êú∫Âô®‰∏äËøêË°åÁöÑÁ®ãÂ∫èÔºåÂÖ∂‰∏≠ÊúâÂÆ¢Êà∑Á´ØË¶ÅË∞ÉÁî®ÁöÑÊñπÊ≥ï„ÄÇ</li>
<li>**ÊúçÂä°Á´ØÂ≠òÊ†π(Server Stub)Ôºö**Êé•Êî∂ÂÆ¢Êà∑StubÁ®ãÂ∫èÈÄöËøáÁΩëÁªúÂèëÈÄÅÁöÑËØ∑Ê±ÇÊ∂àÊÅØÊï∞ÊçÆÂåÖÔºåÂπ∂Ë∞ÉÁî®ÊúçÂä°Á´Ø‰∏≠ÁúüÊ≠£ÁöÑÁ®ãÂ∫èÂäüËÉΩÊñπÊ≥ïÔºåÂÆåÊàêÂäüËÉΩË∞ÉÁî®ÔºõÂÖ∂Ê¨°ÔºåÂ∞ÜÊúçÂä°Á´ØÊâßË°åË∞ÉÁî®ÁöÑÁªìÊûúËøõË°åÊï∞ÊçÆÂ§ÑÁêÜÊâìÂåÖÂèëÈÄÅÁªôÂÆ¢Êà∑Á´ØStubÁ®ãÂ∫è„ÄÇ</li>
</ul>
<h3 id="rpcÁöÑÂéüÁêÜ">rpcÁöÑÂéüÁêÜ</h3>
<p>‰∫ÜËß£ÂÆå‰∫ÜRPCÊäÄÊúØÁöÑÁªÑÊàêÁªìÊûÑÊàë‰ª¨Êù•Áúã‰∏Ä‰∏ãÂÖ∑‰ΩìÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÂÆ¢Êà∑Á´ØÂà∞ÊúçÂä°Á´ØÁöÑË∞ÉÁî®ÁöÑ„ÄÇÂÆûÈôÖ‰∏äÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅÂú®ÁΩëÁªú‰∏≠ÁöÑ‰ªªÊÑè‰∏§Âè∞ËÆ°ÁÆóÊú∫‰∏äÂÆûÁé∞ËøúÁ®ãË∞ÉÁî®ËøáÁ®ãÔºåË¶ÅËß£ÂÜ≥ÂæàÂ§öÈóÆÈ¢òÔºåÊØîÂ¶ÇÔºö</p>
<ul>
<li>‰∏§Âè∞Áâ©ÁêÜÊú∫Âô®Âú®ÁΩëÁªú‰∏≠Ë¶ÅÂª∫Á´ãÁ®≥ÂÆöÂèØÈù†ÁöÑÈÄö‰ø°ËøûÊé•„ÄÇ</li>
<li>‰∏§Âè∞ÊúçÂä°Âô®ÁöÑÈÄö‰ø°ÂçèËÆÆÁöÑÂÆö‰πâÈóÆÈ¢òÔºåÂç≥‰∏§Âè∞ÊúçÂä°Âô®‰∏äÁöÑÁ®ãÂ∫èÂ¶Ç‰ΩïËØÜÂà´ÂØπÊñπÁöÑËØ∑Ê±ÇÂíåËøîÂõûÁªìÊûú„ÄÇ‰πüÂ∞±ÊòØËØ¥‰∏§Âè∞ËÆ°ÁÆóÊú∫ÂøÖÈ°ªÈÉΩËÉΩÂ§üËØÜÂà´ÂØπÊñπÂèëÊù•ÁöÑ‰ø°ÊÅØÔºåÂπ∂‰∏îËÉΩÂ§üËØÜÂà´Âá∫ÂÖ∂‰∏≠ÁöÑËØ∑Ê±ÇÂê´‰πâÂíåËøîÂõûÂê´‰πâÔºåÁÑ∂ÂêéÊâçËÉΩËøõË°åÂ§ÑÁêÜ„ÄÇËøôÂÖ∂ÂÆûÂ∞±ÊòØÈÄö‰ø°ÂçèËÆÆÊâÄË¶ÅÂÆåÊàêÁöÑÂ∑•‰Ωú„ÄÇ</li>
</ul>
<p>ËÆ©Êàë‰ª¨Êù•ÁúãÁúãRPCÂÖ∑‰ΩìÊòØÂ¶Ç‰ΩïËß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢òÁöÑÔºåRPCÂÖ∑‰ΩìÁöÑË∞ÉÁî®Ê≠•È™§ÂõæÂ¶Ç‰∏ãÔºö</p>
<p><img src="http://7xtcwd.com1.z0.glb.clouddn.com/WX20190726-151825@2x.png"
	
	
	
	loading="lazy"
	
		alt="RPCË∞ÉÁî®Ê≠•È™§Âõæ"
	
	
></p>
<p>Âú®‰∏äËø∞Âõæ‰∏≠ÔºåÈÄöËøá1-10ÁöÑÊ≠•È™§ÂõæËß£ÁöÑÂΩ¢ÂºèÔºåËØ¥Êòé‰∫ÜRPCÊØè‰∏ÄÊ≠•ÁöÑË∞ÉÁî®ËøáÁ®ã„ÄÇÂÖ∑‰ΩìÊèèËø∞‰∏∫Ôºö</p>
<ul>
<li>1„ÄÅÂÆ¢Êà∑Á´ØÊÉ≥Ë¶ÅÂèëËµ∑‰∏Ä‰∏™ËøúÁ®ãËøáÁ®ãË∞ÉÁî®ÔºåÈ¶ñÂÖàÈÄöËøáË∞ÉÁî®Êú¨Âú∞ÂÆ¢Êà∑Á´ØStubÁ®ãÂ∫èÁöÑÊñπÂºèË∞ÉÁî®ÊÉ≥Ë¶Å‰ΩøÁî®ÁöÑÂäüËÉΩÊñπÊ≥ïÂêçÔºõ</li>
<li>2„ÄÅÂÆ¢Êà∑Á´ØStubÁ®ãÂ∫èÊé•Êî∂Âà∞‰∫ÜÂÆ¢Êà∑Á´ØÁöÑÂäüËÉΩË∞ÉÁî®ËØ∑Ê±ÇÔºå<strong>Â∞ÜÂÆ¢Êà∑Á´ØËØ∑Ê±ÇË∞ÉÁî®ÁöÑÊñπÊ≥ïÂêçÔºåÊê∫Â∏¶ÁöÑÂèÇÊï∞Á≠â‰ø°ÊÅØÂÅöÂ∫èÂàóÂåñÊìç‰ΩúÔºåÂπ∂ÊâìÂåÖÊàêÊï∞ÊçÆÂåÖ„ÄÇ</strong></li>
<li>3„ÄÅÂÆ¢Êà∑Á´ØStubÊü•ÊâæÂà∞ËøúÁ®ãÊúçÂä°Âô®Á®ãÂ∫èÁöÑIPÂú∞ÂùÄÔºåË∞ÉÁî®SocketÈÄö‰ø°ÂçèËÆÆÔºåÈÄöËøáÁΩëÁªúÂèëÈÄÅÁªôÊúçÂä°Á´Ø„ÄÇ</li>
<li>4„ÄÅÊúçÂä°Á´ØStubÁ®ãÂ∫èÊé•Êî∂Âà∞ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÊï∞ÊçÆÂåÖ‰ø°ÊÅØÔºåÂπ∂<strong>ÈÄöËøáÁ∫¶ÂÆöÂ•ΩÁöÑÂçèËÆÆÂ∞ÜÊï∞ÊçÆËøõË°åÂèçÂ∫èÂàóÂåñÔºåÂæóÂà∞ËØ∑Ê±ÇÁöÑÊñπÊ≥ïÂêçÂíåËØ∑Ê±ÇÂèÇÊï∞Á≠â‰ø°ÊÅØ„ÄÇ</strong></li>
<li>5„ÄÅÊúçÂä°Á´ØStubÁ®ãÂ∫èÂáÜÂ§áÁõ∏ÂÖ≥Êï∞ÊçÆÔºå<strong>Ë∞ÉÁî®Êú¨Âú∞ServerÂØπÂ∫îÁöÑÂäüËÉΩÊñπÊ≥ïËøõË°åÔºåÂπ∂‰º†ÂÖ•Áõ∏Â∫îÁöÑÂèÇÊï∞ÔºåËøõË°å‰∏öÂä°Â§ÑÁêÜ„ÄÇ</strong></li>
<li>6„ÄÅÊúçÂä°Á´ØÁ®ãÂ∫èÊ†πÊçÆÂ∑≤Êúâ‰∏öÂä°ÈÄªËæëÊâßË°åË∞ÉÁî®ËøáÁ®ãÔºåÂæÖ‰∏öÂä°ÊâßË°åÁªìÊùüÔºåÂ∞ÜÊâßË°åÁªìÊûúËøîÂõûÁªôÊúçÂä°Á´ØStubÁ®ãÂ∫è„ÄÇ</li>
<li>7„ÄÅÊúçÂä°Á´ØStubÁ®ãÂ∫è**Â∞ÜÁ®ãÂ∫èË∞ÉÁî®ÁªìÊûúÊåâÁÖßÁ∫¶ÂÆöÁöÑÂçèËÆÆËøõË°åÂ∫èÂàóÂåñÔºå**Âπ∂ÈÄöËøáÁΩëÁªúÂèëÈÄÅÂõûÂÆ¢Êà∑Á´ØStubÁ®ãÂ∫è„ÄÇ</li>
<li>8„ÄÅÂÆ¢Êà∑Á´ØStubÁ®ãÂ∫èÊé•Êî∂Âà∞ÊúçÂä°Á´ØStubÂèëÈÄÅÁöÑËøîÂõûÊï∞ÊçÆÔºå**ÂØπÊï∞ÊçÆËøõË°åÂèçÂ∫èÂàóÂåñÊìç‰ΩúÔºå**Âπ∂Â∞ÜË∞ÉÁî®ËøîÂõûÁöÑÊï∞ÊçÆ‰º†ÈÄíÁªôÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÂèëËµ∑ËÄÖ„ÄÇ</li>
<li>9„ÄÅÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÂèëËµ∑ËÄÖÂæóÂà∞Ë∞ÉÁî®ÁªìÊûúÔºåÊï¥‰∏™RPCË∞ÉÁî®ËøáÁ®ãÁªìÊùü„ÄÇ</li>
</ul>
<h3 id="goÂÆûÁé∞rpc">goÂÆûÁé∞rpc</h3>
<p>Âú®GoËØ≠Ë®ÄÂÆòÊñπÁΩëÁ´ôÁöÑpkgËØ¥Êòé‰∏≠ÔºåÊèê‰æõ‰∫ÜÂÆòÊñπÊîØÊåÅÁöÑrpcÂåÖÔºåÂÖ∑‰ΩìÈìæÊé•Â¶Ç‰∏ãÔºöhttps://golang.org/pkg/net/rpc/„ÄÇÂÆòÊñπÊèê‰æõÁöÑrpcÂåÖÂÆåÊï¥ÁöÑÂåÖÂêçÊòØÔºö<strong>net/rpc</strong>„ÄÇÊ†πÊçÆÂÆòÊñπÁöÑËß£ÈáäÔºårpcÂåÖ‰∏ªË¶ÅÊòØÊèê‰æõÈÄöËøáÁΩëÁªúËÆøÈóÆ‰∏Ä‰∏™ÂØπË±°ÊñπÊ≥ïÁöÑÂäüËÉΩ„ÄÇ</p>
<p>Êú¨ËäÇËØæÔºåÊàë‰ª¨Â∞±Êù•Â≠¶‰π†Â¶Ç‰Ωï‰ΩøÁî®goËØ≠Ë®ÄÂÆòÊñπÊèê‰æõÁöÑRPCÂåÖÂÆûÁé∞RPCË∞ÉÁî®ÁºñÁ†Å„ÄÇ</p>
<h4 id="ÊúçÂä°ÂÆö‰πâÂíåÊö¥Èú≤">ÊúçÂä°ÂÆö‰πâÂíåÊö¥Èú≤</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">T</span><span class="p">)</span> <span class="nf">MethodName</span><span class="p">(</span><span class="nx">request</span> <span class="nx">T1</span><span class="p">,</span><span class="nx">response</span> <span class="o">*</span><span class="nx">T2</span><span class="p">)</span> <span class="kt">error</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏äËø∞‰ª£Á†ÅÊòØgoËØ≠Ë®ÄÂÆòÊñπÁªôÂá∫ÁöÑÂØπÂ§ñÊö¥Èú≤ÁöÑÊúçÂä°ÊñπÊ≥ïÁöÑÂÆö‰πâÊ†áÂáÜÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∫Ü‰∏ªË¶ÅÁöÑÂá†Êù°ËßÑÂàôÔºåÂàÜÂà´ÊòØÔºö</p>
<ul>
<li>1„ÄÅÂØπÂ§ñÊö¥Èú≤ÁöÑÊñπÊ≥ïÊúâ‰∏îÂè™ËÉΩÊúâ‰∏§‰∏™ÂèÇÊï∞ÔºåËøô‰∏™‰∏§‰∏™ÂèÇÊï∞Âè™ËÉΩÊòØËæìÂá∫Á±ªÂûãÊàñÂÜÖÂª∫Á±ªÂûãÔºå‰∏§ÁßçÁ±ªÂûã‰∏≠ÁöÑ‰∏ÄÁßç„ÄÇ</li>
<li>2„ÄÅÊñπÊ≥ïÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÂøÖÈ°ªÊòØÊåáÈíàÁ±ªÂûã„ÄÇ</li>
<li>3„ÄÅÊñπÊ≥ïÁöÑËøîÂõûÁ±ªÂûã‰∏∫error„ÄÇ</li>
<li>4„ÄÅÊñπÊ≥ïÁöÑÁ±ªÂûãÊòØÂèØËæìÂá∫ÁöÑ„ÄÇ</li>
<li>5„ÄÅÊñπÊ≥ïÊú¨Ë∫´‰πüÊòØÂèØËæìÂá∫ÁöÑ„ÄÇ</li>
</ul>
<p>Êàë‰ª¨‰∏æ‰æãËØ¥ÊòéÔºöÂÅáËÆæÁõÆÂâçÊàë‰ª¨Êúâ‰∏Ä‰∏™ÈúÄÊ±ÇÔºåÁªôÂá∫‰∏Ä‰∏™floatÁ±ªÂûãÂèòÈáèÔºå‰Ωú‰∏∫ÂúÜÂΩ¢ÁöÑÂçäÂæÑÔºåË¶ÅÊ±ÇÈÄöËøáRPCË∞ÉÁî®ÔºåËøîÂõûÂØπÂ∫îÁöÑÂúÜÂΩ¢Èù¢ÁßØ„ÄÇÂÖ∑‰ΩìÁöÑÁºñÁ®ãÂÆûÁé∞ÊÄùË∑ØÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MathUtil</span> <span class="kd">struct</span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//ËØ•ÊñπÊ≥ïÂêëÂ§ñÊö¥Èú≤ÔºöÊèê‰æõËÆ°ÁÆóÂúÜÂΩ¢Èù¢ÁßØÁöÑÊúçÂä°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">mu</span> <span class="o">*</span><span class="nx">MathUtil</span><span class="p">)</span> <span class="nf">CalculateCircleArea</span><span class="p">(</span><span class="nx">req</span> <span class="kt">float32</span><span class="p">,</span> <span class="nx">resp</span> <span class="o">*</span><span class="kt">float32</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="nx">resp</span> <span class="p">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">Pi</span> <span class="o">*</span> <span class="nx">req</span> <span class="o">*</span> <span class="nx">req</span> <span class="c1">//ÂúÜÂΩ¢ÁöÑÈù¢ÁßØ s = œÄ * r * r
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="kc">nil</span> <span class="c1">//ËøîÂõûÁ±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="Ê≥®ÂÜåÊúçÂä°ÂíåÁõëÂê¨">Ê≥®ÂÜåÊúçÂä°ÂíåÁõëÂê¨</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;math&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;net&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;net/http&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;net/rpc&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MathUtil</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MathUtil</span><span class="p">)</span><span class="nf">mathFunc</span><span class="p">(</span><span class="nx">req</span> <span class="kt">float32</span><span class="p">,</span><span class="nx">resp</span> <span class="o">*</span><span class="kt">float32</span><span class="p">)</span><span class="kt">error</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="o">*</span><span class="nx">resp</span> <span class="p">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">Pi</span> <span class="o">*</span> <span class="nx">req</span> <span class="o">*</span> <span class="nx">req</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//ÂàùÂßãÂåñÊåáÈíàÁ±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">m</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">MathUtil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//Ê≥®ÂÜåÊúçÂä°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">err</span> <span class="o">:=</span> <span class="nx">rpc</span><span class="p">.</span><span class="nf">Register</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//3„ÄÅÈÄöËøáËØ•ÂáΩÊï∞ÊäämathUtil‰∏≠Êèê‰æõÁöÑÊúçÂä°Ê≥®ÂÜåÂà∞HTTPÂçèËÆÆ‰∏äÔºåÊñπ‰æøË∞ÉÁî®ËÄÖÂèØ‰ª•Âà©Áî®httpÁöÑÊñπÂºèËøõË°åÊï∞ÊçÆ‰º†ÈÄí
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">rpc</span><span class="p">.</span><span class="nf">HandleHTTP</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//4„ÄÅÂú®ÁâπÂÆöÁ´ØÂè£ÁõëÂê¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">listen</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;:8081&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">go</span> <span class="nx">http</span><span class="p">.</span><span class="nf">Serve</span><span class="p">(</span><span class="nx">listen</span><span class="p">,</span><span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁªèËøáÊúçÂä°Ê≥®ÂÜåÂíåÁõëÂê¨Â§ÑÁêÜÔºåRPCË∞ÉÁî®ËøáÁ®ã‰∏≠ÁöÑÊúçÂä°Á´ØÂÆûÁé∞Â∞±Â∑≤ÁªèÂÆåÊàê‰∫Ü„ÄÇÊé•‰∏ãÊù•ÈúÄË¶ÅÂÆûÁé∞ÁöÑÊòØÂÆ¢Êà∑Á´ØËØ∑Ê±Ç‰ª£Á†ÅÁöÑÂÆûÁé∞„ÄÇ</p>
<h4 id="ÂÆ¢Êà∑Á´ØË∞ÉÁî®">ÂÆ¢Êà∑Á´ØË∞ÉÁî®</h4>
<p>‰∏äËø∞ÁöÑË∞ÉÁî®ÊñπÊ≥ïÊ†∏ÂøÉÂú®‰∫éclient.CallÊñπÊ≥ïÁöÑË∞ÉÁî®ÔºåËØ•ÊñπÊ≥ïÊúâ‰∏â‰∏™ÂèÇÊï∞ÔºåÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Ë°®Á§∫Ë¶ÅË∞ÉÁî®ÁöÑËøúÁ´ØÊúçÂä°ÁöÑÊñπÊ≥ïÂêçÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØË∞ÉÁî®Êó∂Ë¶Å‰º†ÂÖ•ÁöÑÂèÇÊï∞ÔºåÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÊòØË∞ÉÁî®Ë¶ÅÊé•Êî∂ÁöÑËøîÂõûÂÄº„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;net/rpc&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//ËøûÊé•ÊúçÂä°Âô®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">client</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">rpc</span><span class="p">.</span><span class="nf">DialHTTP</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;localhost:8081&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">req</span> <span class="kt">float32</span> <span class="c1">//ËØ∑Ê±ÇÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">req</span> <span class="p">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">resp</span> <span class="kt">float32</span> <span class="c1">//ËøîÂõûÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//Ë∞ÉÁî®ÊúçÂä°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">err</span> <span class="p">=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">Call</span><span class="p">(</span><span class="s">&#34;MathUtil.MathFunc&#34;</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">resp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="ÂÆ¢Êà∑Á´ØÂºÇÊ≠•Ë∞ÉÁî®">ÂÆ¢Êà∑Á´ØÂºÇÊ≠•Ë∞ÉÁî®</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//ËøûÊé•ÊúçÂä°Âô®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">client</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">rpc</span><span class="p">.</span><span class="nf">DialHTTP</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;localhost:8081&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">req</span> <span class="kt">float32</span> <span class="c1">//ËØ∑Ê±ÇÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">req</span> <span class="p">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">resp</span> <span class="kt">float32</span> <span class="c1">//ËøîÂõûÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//Ë∞ÉÁî®ÊúçÂä°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">call</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">Go</span><span class="p">(</span><span class="s">&#34;MathUtil.MathFunc&#34;</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">resp</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">replyDone</span> <span class="o">:=</span>  <span class="o">&lt;-</span><span class="nx">call</span><span class="p">.</span><span class="nx">Done</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">replyDone</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="Â§öÂèÇÊï∞‰º†ÈÄí">Â§öÂèÇÊï∞‰º†ÈÄí</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">AddParma</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Args1</span> <span class="kt">float32</span> <span class="c1">//Á¨¨‰∏Ä‰∏™ÂèÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Args2</span> <span class="kt">float32</span> <span class="c1">//Á¨¨‰∫å‰∏™ÂèÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">mu</span> <span class="o">*</span><span class="nx">MathUtil</span><span class="p">)</span> <span class="nf">Add</span><span class="p">(</span><span class="nx">param</span> <span class="nx">param</span><span class="p">.</span><span class="nx">AddParma</span><span class="p">,</span> <span class="nx">resp</span> <span class="o">*</span><span class="kt">float32</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="nx">resp</span> <span class="p">=</span> <span class="nx">param</span><span class="p">.</span><span class="nx">Args1</span> <span class="o">+</span> <span class="nx">param</span><span class="p">.</span><span class="nx">Args2</span> <span class="c1">//ÂÆûÁé∞‰∏§Êï∞Áõ∏Âä†ÁöÑÂäüËÉΩ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">mathUtil</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">MathUtil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">err</span> <span class="o">:=</span> <span class="nx">rpc</span><span class="p">.</span><span class="nf">RegisterName</span><span class="p">(</span><span class="s">&#34;MathUtil&#34;</span><span class="p">,</span> <span class="nx">mathUtil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">rpc</span><span class="p">.</span><span class="nf">HandleHTTP</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">listen</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;:8082&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">http</span><span class="p">.</span><span class="nf">Serve</span><span class="p">(</span><span class="nx">listen</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="rpcÂíåprotobuffer">rpcÂíåprotobuffer</h3>
<p>È¶ñÂÖàÂèØ‰ª•Â∞ÜcallÂáΩÊï∞‰∏≠ÁöÑreqÂíårespÈÉΩÁî®protobufferÁîüÊàê„ÄÇÂÖ∂‰ªñÊ≠•È™§Á±ª‰ºº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-protobuf" data-lang="protobuf"><span class="line"><span class="cl"><span class="n">syntax</span><span class="o">=</span><span class="s">&#34;proto3&#34;</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">option</span> <span class="n">go_package</span><span class="o">=</span><span class="s">&#34;./;rpcAndproto&#34;</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c1">//ËÆ¢ÂçïËØ∑Ê±ÇÂèÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">message</span> <span class="nc">OrderRequest</span> <span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">orderId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">int64</span> <span class="n">timeStamp</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c1">//ËÆ¢Âçï‰ø°ÊÅØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">message</span> <span class="nc">OrderInfo</span> <span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">OrderId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">OrderName</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">OrderStatus</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="kd">service</span> <span class="n">OrderService</span><span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="k">rpc</span> <span class="n">GetOrderInfo</span><span class="p">(</span><span class="n">OrderRequest</span><span class="p">)</span> <span class="k">returns</span> <span class="p">(</span><span class="n">OrderInfo</span><span class="p">);</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">}</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Code generated by protoc-gen-go. DO NOT EDIT.
</span></span></span><span class="line"><span class="cl"><span class="c1">// versions:
</span></span></span><span class="line"><span class="cl"><span class="c1">// 	protoc-gen-go v1.28.0
</span></span></span><span class="line"><span class="cl"><span class="c1">// 	protoc        v3.20.0
</span></span></span><span class="line"><span class="cl"><span class="c1">// source: Order.proto
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">rpcAndproto</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">protoreflect</span> <span class="s">&#34;google.golang.org/protobuf/reflect/protoreflect&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">protoimpl</span> <span class="s">&#34;google.golang.org/protobuf/runtime/protoimpl&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">reflect</span> <span class="s">&#34;reflect&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sync</span> <span class="s">&#34;sync&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Verify that this generated code is sufficiently up-to-date.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">_</span> <span class="p">=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nf">EnforceVersion</span><span class="p">(</span><span class="mi">20</span> <span class="o">-</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">MinVersion</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Verify that runtime/protoimpl is sufficiently up-to-date.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">_</span> <span class="p">=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nf">EnforceVersion</span><span class="p">(</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nx">MaxVersion</span> <span class="o">-</span> <span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ËÆ¢ÂçïËØ∑Ê±ÇÂèÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">OrderRequest</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">state</span>         <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">MessageState</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sizeCache</span>     <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">SizeCache</span>
</span></span><span class="line"><span class="cl">	<span class="nx">unknownFields</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">UnknownFields</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">OrderId</span>   <span class="kt">string</span> <span class="s">`protobuf:&#34;bytes,1,opt,name=orderId,proto3&#34; json:&#34;orderId,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">TimeStamp</span> <span class="kt">int64</span>  <span class="s">`protobuf:&#34;varint,2,opt,name=timeStamp,proto3&#34; json:&#34;timeStamp,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="nf">Reset</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="o">*</span><span class="nx">x</span> <span class="p">=</span> <span class="nx">OrderRequest</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">UnsafeEnabled</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">mi</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">file_Order_proto_msgTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ms</span> <span class="o">:=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nf">MessageStateOf</span><span class="p">(</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nf">Pointer</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ms</span><span class="p">.</span><span class="nf">StoreMessageInfo</span><span class="p">(</span><span class="nx">mi</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="nf">String</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nf">MessageStringOf</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="nf">ProtoMessage</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="nf">ProtoReflect</span><span class="p">()</span> <span class="nx">protoreflect</span><span class="p">.</span><span class="nx">Message</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">mi</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">file_Order_proto_msgTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">UnsafeEnabled</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ms</span> <span class="o">:=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nf">MessageStateOf</span><span class="p">(</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nf">Pointer</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">ms</span><span class="p">.</span><span class="nf">LoadMessageInfo</span><span class="p">()</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">ms</span><span class="p">.</span><span class="nf">StoreMessageInfo</span><span class="p">(</span><span class="nx">mi</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">ms</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">mi</span><span class="p">.</span><span class="nf">MessageOf</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Deprecated: Use OrderRequest.ProtoReflect.Descriptor instead.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="nf">Descriptor</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nf">file_Order_proto_rawDescGZIP</span><span class="p">(),</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="nf">GetOrderId</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">OrderId</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="nf">GetTimeStamp</span><span class="p">()</span> <span class="kt">int64</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">TimeStamp</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ËÆ¢Âçï‰ø°ÊÅØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">OrderInfo</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">state</span>         <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">MessageState</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sizeCache</span>     <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">SizeCache</span>
</span></span><span class="line"><span class="cl">	<span class="nx">unknownFields</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">UnknownFields</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">OrderId</span>     <span class="kt">string</span> <span class="s">`protobuf:&#34;bytes,1,opt,name=OrderId,proto3&#34; json:&#34;OrderId,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">OrderName</span>   <span class="kt">string</span> <span class="s">`protobuf:&#34;bytes,2,opt,name=OrderName,proto3&#34; json:&#34;OrderName,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">OrderStatus</span> <span class="kt">string</span> <span class="s">`protobuf:&#34;bytes,3,opt,name=OrderStatus,proto3&#34; json:&#34;OrderStatus,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="nf">Reset</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="o">*</span><span class="nx">x</span> <span class="p">=</span> <span class="nx">OrderInfo</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">UnsafeEnabled</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">mi</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">file_Order_proto_msgTypes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ms</span> <span class="o">:=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nf">MessageStateOf</span><span class="p">(</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nf">Pointer</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ms</span><span class="p">.</span><span class="nf">StoreMessageInfo</span><span class="p">(</span><span class="nx">mi</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="nf">String</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nf">MessageStringOf</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="nf">ProtoMessage</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="nf">ProtoReflect</span><span class="p">()</span> <span class="nx">protoreflect</span><span class="p">.</span><span class="nx">Message</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">mi</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">file_Order_proto_msgTypes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">UnsafeEnabled</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ms</span> <span class="o">:=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nf">MessageStateOf</span><span class="p">(</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nf">Pointer</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">ms</span><span class="p">.</span><span class="nf">LoadMessageInfo</span><span class="p">()</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">ms</span><span class="p">.</span><span class="nf">StoreMessageInfo</span><span class="p">(</span><span class="nx">mi</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">ms</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">mi</span><span class="p">.</span><span class="nf">MessageOf</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Deprecated: Use OrderInfo.ProtoReflect.Descriptor instead.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="nf">Descriptor</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nf">file_Order_proto_rawDescGZIP</span><span class="p">(),</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="nf">GetOrderId</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">OrderId</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="nf">GetOrderName</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">OrderName</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="nf">GetOrderStatus</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">OrderStatus</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">File_Order_proto</span> <span class="nx">protoreflect</span><span class="p">.</span><span class="nx">FileDescriptor</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">file_Order_proto_rawDesc</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x0b</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x46</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x71</span><span class="p">,</span> <span class="mh">0x75</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x69</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x69</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x66</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x4e</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x4e</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x0b</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x75</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x0b</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x75</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x39</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x76</span><span class="p">,</span> <span class="mh">0x69</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x47</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x66</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x71</span><span class="p">,</span> <span class="mh">0x75</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x66</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x5a</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="mh">0x33</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">file_Order_proto_rawDescOnce</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">Once</span>
</span></span><span class="line"><span class="cl">	<span class="nx">file_Order_proto_rawDescData</span> <span class="p">=</span> <span class="nx">file_Order_proto_rawDesc</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">file_Order_proto_rawDescGZIP</span><span class="p">()</span> <span class="p">[]</span><span class="kt">byte</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">file_Order_proto_rawDescOnce</span><span class="p">.</span><span class="nf">Do</span><span class="p">(</span><span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">file_Order_proto_rawDescData</span> <span class="p">=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nf">CompressGZIP</span><span class="p">(</span><span class="nx">file_Order_proto_rawDescData</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">})</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">file_Order_proto_rawDescData</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">file_Order_proto_msgTypes</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nx">MessageInfo</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">file_Order_proto_goTypes</span> <span class="p">=</span> <span class="p">[]</span><span class="kd">interface</span><span class="p">{}{</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)(</span><span class="kc">nil</span><span class="p">),</span> <span class="c1">// 0: OrderRequest
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)(</span><span class="kc">nil</span><span class="p">),</span>    <span class="c1">// 1: OrderInfo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">file_Order_proto_depIdxs</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">int32</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="mi">0</span><span class="p">,</span> <span class="c1">// 0: OrderService.GetOrderInfo:input_type -&gt; OrderRequest
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="mi">1</span><span class="p">,</span> <span class="c1">// 1: OrderService.GetOrderInfo:output_type -&gt; OrderInfo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="mi">1</span><span class="p">,</span> <span class="c1">// [1:2] is the sub-list for method output_type
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="mi">0</span><span class="p">,</span> <span class="c1">// [0:1] is the sub-list for method input_type
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="mi">0</span><span class="p">,</span> <span class="c1">// [0:0] is the sub-list for extension type_name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="mi">0</span><span class="p">,</span> <span class="c1">// [0:0] is the sub-list for extension extendee
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="mi">0</span><span class="p">,</span> <span class="c1">// [0:0] is the sub-list for field type_name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span> <span class="nf">file_Order_proto_init</span><span class="p">()</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">file_Order_proto_init</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">File_Order_proto</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">!</span><span class="nx">protoimpl</span><span class="p">.</span><span class="nx">UnsafeEnabled</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">file_Order_proto_msgTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">Exporter</span> <span class="p">=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">v</span> <span class="kd">interface</span><span class="p">{},</span> <span class="nx">i</span> <span class="kt">int</span><span class="p">)</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">switch</span> <span class="nx">v</span> <span class="o">:=</span> <span class="nx">v</span><span class="p">.(</span><span class="o">*</span><span class="nx">OrderRequest</span><span class="p">);</span> <span class="nx">i</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">case</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="o">&amp;</span><span class="nx">v</span><span class="p">.</span><span class="nx">state</span>
</span></span><span class="line"><span class="cl">			<span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="o">&amp;</span><span class="nx">v</span><span class="p">.</span><span class="nx">sizeCache</span>
</span></span><span class="line"><span class="cl">			<span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="o">&amp;</span><span class="nx">v</span><span class="p">.</span><span class="nx">unknownFields</span>
</span></span><span class="line"><span class="cl">			<span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="nx">file_Order_proto_msgTypes</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">Exporter</span> <span class="p">=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">v</span> <span class="kd">interface</span><span class="p">{},</span> <span class="nx">i</span> <span class="kt">int</span><span class="p">)</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">switch</span> <span class="nx">v</span> <span class="o">:=</span> <span class="nx">v</span><span class="p">.(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">);</span> <span class="nx">i</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">case</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="o">&amp;</span><span class="nx">v</span><span class="p">.</span><span class="nx">state</span>
</span></span><span class="line"><span class="cl">			<span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="o">&amp;</span><span class="nx">v</span><span class="p">.</span><span class="nx">sizeCache</span>
</span></span><span class="line"><span class="cl">			<span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="o">&amp;</span><span class="nx">v</span><span class="p">.</span><span class="nx">unknownFields</span>
</span></span><span class="line"><span class="cl">			<span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">type</span> <span class="nx">x</span> <span class="kd">struct</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">out</span> <span class="o">:=</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">TypeBuilder</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">File</span><span class="p">:</span> <span class="nx">protoimpl</span><span class="p">.</span><span class="nx">DescBuilder</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">GoPackagePath</span><span class="p">:</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">TypeOf</span><span class="p">(</span><span class="nx">x</span><span class="p">{}).</span><span class="nf">PkgPath</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">			<span class="nx">RawDescriptor</span><span class="p">:</span> <span class="nx">file_Order_proto_rawDesc</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">NumEnums</span><span class="p">:</span>      <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">NumMessages</span><span class="p">:</span>   <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">NumExtensions</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="nx">NumServices</span><span class="p">:</span>   <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="nx">GoTypes</span><span class="p">:</span>           <span class="nx">file_Order_proto_goTypes</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">DependencyIndexes</span><span class="p">:</span> <span class="nx">file_Order_proto_depIdxs</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">MessageInfos</span><span class="p">:</span>      <span class="nx">file_Order_proto_msgTypes</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}.</span><span class="nf">Build</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">File_Order_proto</span> <span class="p">=</span> <span class="nx">out</span><span class="p">.</span><span class="nx">File</span>
</span></span><span class="line"><span class="cl">	<span class="nx">file_Order_proto_rawDesc</span> <span class="p">=</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nx">file_Order_proto_goTypes</span> <span class="p">=</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nx">file_Order_proto_depIdxs</span> <span class="p">=</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúçÂä°Âô®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;errors&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;goTrip/rpcAndproto&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;net&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;net/http&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;net/rpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;time&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">OrderService</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">o</span> <span class="o">*</span><span class="nx">OrderService</span><span class="p">)</span> <span class="nf">GetAccount</span><span class="p">(</span><span class="nx">request</span> <span class="nx">rpcAndproto</span><span class="p">.</span><span class="nx">OrderRequest</span><span class="p">,</span><span class="nx">response</span> <span class="o">*</span><span class="nx">rpcAndproto</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="kt">error</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">orderMap</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">rpcAndproto</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;201907300001&#34;</span><span class="p">:</span> <span class="nx">rpcAndproto</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907300001&#34;</span><span class="p">,</span> <span class="nx">OrderName</span><span class="p">:</span> <span class="s">&#34;Ë°£Êúç&#34;</span><span class="p">,</span> <span class="nx">OrderStatus</span><span class="p">:</span> <span class="s">&#34;Â∑≤‰ªòÊ¨æ&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;201907310001&#34;</span><span class="p">:</span> <span class="nx">rpcAndproto</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907310001&#34;</span><span class="p">,</span> <span class="nx">OrderName</span><span class="p">:</span> <span class="s">&#34;Èõ∂È£ü&#34;</span><span class="p">,</span> <span class="nx">OrderStatus</span><span class="p">:</span> <span class="s">&#34;Â∑≤‰ªòÊ¨æ&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;201907310002&#34;</span><span class="p">:</span> <span class="nx">rpcAndproto</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907310002&#34;</span><span class="p">,</span> <span class="nx">OrderName</span><span class="p">:</span> <span class="s">&#34;È£üÂìÅ&#34;</span><span class="p">,</span> <span class="nx">OrderStatus</span><span class="p">:</span> <span class="s">&#34;Êú™‰ªòÊ¨æ&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">current</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Unix</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">TimeStamp</span> <span class="p">&gt;</span> <span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="o">*</span><span class="nx">response</span> <span class="p">=</span> <span class="nx">rpcAndproto</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;0&#34;</span><span class="p">,</span> <span class="nx">OrderName</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="nx">OrderStatus</span><span class="p">:</span> <span class="s">&#34;ËÆ¢Âçï‰ø°ÊÅØÂºÇÂ∏∏&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">result</span> <span class="o">:=</span> <span class="nx">orderMap</span><span class="p">[</span><span class="nx">request</span><span class="p">.</span><span class="nx">OrderId</span><span class="p">]</span><span class="c1">//201907310003
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">if</span> <span class="nx">result</span><span class="p">.</span><span class="nx">OrderId</span> <span class="o">!=</span> <span class="s">&#34;&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="o">*</span><span class="nx">response</span> <span class="p">=</span> <span class="nx">orderMap</span><span class="p">[</span><span class="nx">request</span><span class="p">.</span><span class="nx">OrderId</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;server error&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">o</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">OrderService</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">err</span> <span class="o">:=</span> <span class="nx">rpc</span><span class="p">.</span><span class="nf">Register</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">rpc</span><span class="p">.</span><span class="nf">HandleHTTP</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">listen</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;:8081&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">http</span><span class="p">.</span><span class="nf">Serve</span><span class="p">(</span><span class="nx">listen</span><span class="p">,</span><span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÆ¢Êà∑Á´Ø</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;goTrip/rpcAndproto&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;net/rpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;time&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">client</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">rpc</span><span class="p">.</span><span class="nf">DialHTTP</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;localhost:8081&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">timeStamp</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Unix</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">request</span> <span class="o">:=</span> <span class="nx">rpcAndproto</span><span class="p">.</span><span class="nx">OrderRequest</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907310001&#34;</span><span class="p">,</span> <span class="nx">TimeStamp</span><span class="p">:</span> <span class="nx">timeStamp</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">response</span> <span class="o">*</span><span class="nx">rpcAndproto</span><span class="p">.</span><span class="nx">OrderInfo</span>
</span></span><span class="line"><span class="cl">	<span class="nx">err</span> <span class="p">=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">Call</span><span class="p">(</span><span class="s">&#34;OrderService.GetAccount&#34;</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">response</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="o">*</span><span class="nx">response</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂàùËØÜgrpc">ÂàùËØÜgrpc</h2>
<h3 id="ÂæóÂà∞grpc">ÂæóÂà∞grpc</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">go</span> <span class="nx">get</span> <span class="o">-</span><span class="nx">u</span> <span class="nx">google</span><span class="p">.</span><span class="nx">golang</span><span class="p">.</span><span class="nx">org</span><span class="o">/</span><span class="nx">grpc</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="grpcÁöÑ‰ΩøÁî®">grpcÁöÑ‰ΩøÁî®</h3>
<p>Êàë‰ª¨ÊÉ≥Ë¶ÅÂÆûÁé∞ÁöÑÊòØÈÄöËøágRPCÊ°ÜÊû∂ËøõË°åËøúÁ®ãÊúçÂä°Ë∞ÉÁî®ÔºåÈ¶ñÂÖàÁ¨¨‰∏ÄÊ≠•Â∫îËØ•ÊòØË¶ÅÊúâÊúçÂä°„ÄÇÂà©Áî®‰πãÂâçÊâÄÊéåÊè°ÁöÑÂÜÖÂÆπÔºågRPCÊ°ÜÊû∂ÊîØÊåÅÂØπÊúçÂä°ÁöÑÂÆö‰πâÂíåÁîüÊàê„ÄÇ
gRPCÊ°ÜÊû∂ÈªòËÆ§‰ΩøÁî®protocol buffers‰Ωú‰∏∫Êé•Âè£ÂÆö‰πâËØ≠Ë®ÄÔºåÁî®‰∫éÊèèËø∞ÁΩëÁªú‰º†ËæìÊ∂àÊÅØÁªìÊûÑ„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåËøòÂèØ‰ª•‰ΩøÁî®protobufÂÆö‰πâÊúçÂä°Êé•Âè£„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">syntax</span> <span class="p">=</span> <span class="s">&#34;proto3&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">message</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ËÆ¢ÂçïËØ∑Ê±ÇÂèÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">message</span> <span class="nx">OrderRequest</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">string</span> <span class="nx">orderId</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int64</span> <span class="nx">timeStamp</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ËÆ¢Âçï‰ø°ÊÅØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">message</span> <span class="nx">OrderInfo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">string</span> <span class="nx">OrderId</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">string</span> <span class="nx">OrderName</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">string</span> <span class="nx">OrderStatus</span> <span class="p">=</span> <span class="mi">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ËÆ¢ÂçïÊúçÂä°serviceÂÆö‰πâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">service</span> <span class="nx">OrderService</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rpc</span> <span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="nf">returns</span> <span class="p">(</span><span class="nx">OrderInfo</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="grpcÁºñËØëÊîØÊåÅ">gRPCÁºñËØëÊîØÊåÅ</h4>
<p>Â¶ÇÊûúÂÆö‰πâÁöÑ.protoÊñá‰ª∂ÔºåÂ¶ÇÊú¨Ê°à‰æã‰∏≠ÊâÄÁ§∫ÔºåÂÆö‰πâ‰∏≠ÂåÖÂê´‰∫ÜÊúçÂä°Êé•Âè£ÁöÑÂÆö‰πâÔºåËÄåÊàë‰ª¨ÊÉ≥Ë¶Å‰ΩøÁî®gRPCÊ°ÜÊû∂ÂÆûÁé∞RPCË∞ÉÁî®„ÄÇÂºÄÂèëËÄÖÂèØ‰ª•ÈááÁî®protocol-gen-goÂ∫ìÊèê‰æõÁöÑÊèí‰ª∂ÁºñËØëÂäüËÉΩÔºåÁîüÊàêÂÖºÂÆπgRPCÊ°ÜÊû∂ÁöÑgolangËØ≠Ë®Ä‰ª£Á†Å„ÄÇÂè™ÈúÄË¶ÅÂú®Âü∫Êú¨ÁºñËØëÂëΩ‰ª§ÁöÑÂü∫Á°Ä‰∏äÔºåÊåáÂÆöÊèí‰ª∂ÁöÑÂèÇÊï∞ÔºåÂëäÁü•protocÁºñËØëÂô®Âç≥ÂèØ„ÄÇÂÖ∑‰ΩìÁöÑÁºñËØëÁîüÊàêÂÖºÂÆπgRPCÊ°ÜÊû∂ÁöÑÊúçÂä°‰ª£Á†ÅÁöÑÂëΩ‰ª§Â¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">protoc --go_out<span class="o">=</span><span class="nv">plugins</span><span class="o">=</span>grpc:. *.proto
</span></span></code></pre></td></tr></table>
</div>
</div><p>pb.goÁîüÊàêÁöÑÂÆ¢Êà∑Á´ØÊñπÊ≥ï‰ª£Á†ÅÔºåÁªô‰∫ÜÁîüÊàêÂÆ¢Êà∑Á´ØÁöÑÊñπÊ≥ïÔºåÁªô‰∫ÜË∞ÉÁî®ÊúçÂä°ÁöÑÊñπÊ≥ï</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// OrderServiceClient is the client API for OrderService service.
</span></span></span><span class="line"><span class="cl"><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1">// For semantics around ctx use and closing/ending streaming RPCs, please refer to https://godoc.org/google.golang.org/grpc#ClientConn.NewStream.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">OrderServiceClient</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">in</span> <span class="o">*</span><span class="nx">OrderRequest</span><span class="p">,</span> <span class="nx">opts</span> <span class="o">...</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">CallOption</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">orderServiceClient</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">cc</span> <span class="nx">grpc</span><span class="p">.</span><span class="nx">ClientConnInterface</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">NewOrderServiceClient</span><span class="p">(</span><span class="nx">cc</span> <span class="nx">grpc</span><span class="p">.</span><span class="nx">ClientConnInterface</span><span class="p">)</span> <span class="nx">OrderServiceClient</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">orderServiceClient</span><span class="p">{</span><span class="nx">cc</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">orderServiceClient</span><span class="p">)</span> <span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">in</span> <span class="o">*</span><span class="nx">OrderRequest</span><span class="p">,</span> <span class="nx">opts</span> <span class="o">...</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">CallOption</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">out</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">OrderInfo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">err</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">cc</span><span class="p">.</span><span class="nf">Invoke</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="s">&#34;/OrderService/GetOrderInfo&#34;</span><span class="p">,</span> <span class="nx">in</span><span class="p">,</span> <span class="nx">out</span><span class="p">,</span> <span class="nx">opts</span><span class="o">...</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">out</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>pb.goÁîüÊàêÁöÑÊúçÂä°Âô®ÊñπÊ≥ï‰ª£Á†ÅÔºåÊèê‰æõ‰∫ÜÊ≥®ÂÜåÂ∑≤ÂÆûÁé∞OrderServiceÊé•Âè£ÁöÑÊñπÊ≥ïÔºåÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Ê≤°ÊúâÂÆûÁé∞ÊñπÊ≥ïÁöÑÁ±ª„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// OrderServiceServer is the server API for OrderService service.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">OrderServiceServer</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// UnimplementedOrderServiceServer can be embedded to have forward compatible implementations.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">UnimplementedOrderServiceServer</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">UnimplementedOrderServiceServer</span><span class="p">)</span> <span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">status</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="nx">codes</span><span class="p">.</span><span class="nx">Unimplemented</span><span class="p">,</span> <span class="s">&#34;method GetOrderInfo not implemented&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">RegisterOrderServiceServer</span><span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">Server</span><span class="p">,</span> <span class="nx">srv</span> <span class="nx">OrderServiceServer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span><span class="p">.</span><span class="nf">RegisterService</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">_OrderService_serviceDesc</span><span class="p">,</span> <span class="nx">srv</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÂÆûÁé∞rpcÊúçÂä°">ÂÆûÁé∞rpcÊúçÂä°</h4>
<p>Âú®‰∏äÈù¢ÁöÑprotoÊñá‰ª∂‰∏≠ÂÆö‰πâÁöÑÊñπÊ≥ïÔºåÊàë‰ª¨ÂèØ‰ª•ÂèëÁé∞Âπ∂Ê≤°ÊúâÊñπÊ≥ï‰ΩìÔºåÁ±ª‰ºº‰∫éÊé•Âè£ÔºåÊàë‰ª¨Ë¶ÅÂÆûÁé∞Ëøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<p>ÂØπ‰∫éÂÆûÁé∞ÁöÑÊñπÊ≥ïÔºåÂèÇÊï∞‰ºöÂØπÂ∫îÁöÑÊîπÂèò„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">os</span> <span class="o">*</span><span class="nx">OrderServiceImpl</span><span class="p">)</span><span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="nx">request</span> <span class="o">*</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">OrderRequest</span><span class="p">)(</span><span class="o">*</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">,</span><span class="kt">error</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/blog/C:%5cUsers%5cMyHope%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20220408104515526.png"
	
	
	
	loading="lazy"
	
		alt="image-20220408104515526"
	
	
></p>
<h4 id="grpcÂÆûÁé∞ÊúçÂä°Âô®">grpcÂÆûÁé∞ÊúçÂä°Âô®</h4>
<p>ËøôÈáåÁî±‰∫éÊàëÁöÑÂåÖÂêçËÆæÁΩÆÊàê‰∫ÜgrpcÔºàÊñπ‰æøÂ§ç‰π†ÔºâÔºåÊâÄ‰ª•Â∞ÜgoogleÁöÑgrpcËµ∑Âà´ÂêçÊàê‰∫ÜGrpc</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">server</span> <span class="o">:=</span> <span class="nx">Grpc</span><span class="p">.</span><span class="nf">NewServer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nf">RegisterOrderServiceServer</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span><span class="nb">new</span><span class="p">(</span><span class="nx">OrderServiceImpl</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nx">listen</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;:8081&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">server</span><span class="p">.</span><span class="nf">Serve</span><span class="p">(</span><span class="nx">listen</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="grpcÂÆûÁé∞ÂÆ¢Êà∑Á´Ø">grpcÂÆûÁé∞ÂÆ¢Êà∑Á´Ø</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;golang.org/x/net/context&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Grpc</span> <span class="s">&#34;google.golang.org/grpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;goTrip/grpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;time&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">conn</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">Grpc</span><span class="p">.</span><span class="nf">Dial</span><span class="p">(</span><span class="s">&#34;localhost:8081&#34;</span><span class="p">,</span> <span class="nx">Grpc</span><span class="p">.</span><span class="nf">WithInsecure</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">defer</span> <span class="nx">conn</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//‰ªéproto‰∏≠Ëé∑ÂæóËøûÊé•ÊúçÂä°ÁöÑÂÆ¢Êà∑Á´Ø
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">client</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">NewOrderServiceClient</span><span class="p">(</span><span class="nx">conn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">req</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">OrderRequest</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">OrderId</span><span class="p">:</span>   <span class="s">&#34;201907300001&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">TimeStamp</span><span class="p">:</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Unix</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">info</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span> <span class="nx">req</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">info</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nf">GetOrderId</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nf">GetOrderName</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nf">GetOrderStatus</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="grpcÁöÑÊµÅÊ®°Âºè">grpcÁöÑÊµÅÊ®°Âºè</h3>
<p>Âú®‰∏äËäÇËØæÂÜÖÂÆπ‰∏≠ÔºåÊàë‰ª¨Â≠¶‰π†‰∫Ü‰ΩøÁî®gRPCÊ°ÜÊû∂ÂÆûÁé∞ÊúçÂä°ÁöÑË∞ÉÁî®ÁºñÁ®ã„ÄÇÂú®gRPCÊ°ÜÊû∂‰∏≠ÔºåËØ∏Â¶Ç‰∏äËäÇËØæÊàë‰ª¨Â≠¶‰π†ÁöÑÂú®ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Á´Ø‰πãÈó¥ÈÄöËøáÊ∂àÊÅØÁªìÊûÑ‰ΩìÂÆö‰πâÁöÑÊñπÂºèÊù•‰º†ÈÄíÊï∞ÊçÆÔºåÊàë‰ª¨Áß∞‰πã‰∏∫‚ÄúÂçïÈ°πRPC‚ÄùÔºå‰πüÁß∞‰πã‰∏∫ÁÆÄÂçïÊ®°Âºè„ÄÇÈô§Ê≠§‰πãÂ§ñÔºågRPC‰∏≠ËøòÊúâ<strong>Êï∞ÊçÆÊµÅÊ®°Âºè</strong>ÁöÑRPCË∞ÉÁî®ÂÆûÁé∞ÔºåËøôÊ≠£ÊòØÊàë‰ª¨Êú¨ËäÇËØæË¶ÅÂ≠¶‰π†ÁöÑÂÜÖÂÆπ„ÄÇ</p>
<h4 id="ÊúçÂä°Âô®ÊµÅÂΩ¢Âºè">ÊúçÂä°Âô®ÊµÅÂΩ¢Âºè</h4>
<h5 id="ÂÆö‰πâprotoÊñá‰ª∂">ÂÆö‰πâprotoÊñá‰ª∂</h5>
<p>Ëøô‰∏ÄÊ¨°ÁöÑprotoÊñá‰ª∂Âíå‰∏ä‰∏Ä‰∏™CsÊ®°ÂºèÁöÑÊúâ‰∫õËÆ∏‰∏çÂêåÔºåreturnÁöÑÂ∏¶Êúâstream</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-protobuf" data-lang="protobuf"><span class="line"><span class="cl"><span class="kd">service</span> <span class="n">OrderService</span> <span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>    <span class="k">rpc</span> <span class="n">GetOrderInfos</span> <span class="p">(</span><span class="n">OrderRequest</span><span class="p">)</span> <span class="k">returns</span> <span class="p">(</span><span class="n">stream</span> <span class="n">OrderInfo</span><span class="p">)</span> <span class="p">{};</span> <span class="c1">//ÊúçÂä°Á´ØÊµÅÊ®°Âºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøástream‰øÆÈ•∞ÁöÑÊñπÂºèË°®Á§∫ËØ•Êé•Âè£Ë∞ÉÁî®Êó∂ÔºåÊúçÂä°Á´Ø‰ºö‰ª•Êï∞ÊçÆÊµÅÁöÑÂΩ¢ÂºèÂ∞ÜÊï∞ÊçÆËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">protoc --go_out<span class="o">=</span><span class="nv">plugins</span><span class="o">=</span>grpc:. ./*.proto
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁîüÊàêÁöÑÊñá‰ª∂‰πü‰ºöÊúâ‰∫õËÆ∏‰∏çÂêå„ÄÇ</p>
<p>ÂØπ‰∫éÊñπÊ≥ïÊñπÈù¢ÔºåÂÆ¢Êà∑Á´ØÂ¶Ç‰∏ãÔºåÂèëÁé∞Áõ∏ËæÉ‰∫é‰∏äÈù¢ÁöÑÈùûÊµÅ‰º†ËæìÔºåÂ§ö‰∫Ü‰∏Ä‰∏™recvÂáΩÊï∞ÔºåËøô‰∏™Â∫îËØ•Êó∂Áî®Êù•Êé•ÂèóÊúçÂä°Âô®‰º†ËøáÊù•ÁöÑOrderInfo</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">NewOrderServiceClient</span><span class="p">(</span><span class="nx">cc</span> <span class="nx">grpc</span><span class="p">.</span><span class="nx">ClientConnInterface</span><span class="p">)</span> <span class="nx">OrderServiceClient</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">orderServiceClient</span><span class="p">{</span><span class="nx">cc</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">orderServiceClient</span><span class="p">)</span> <span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">in</span> <span class="o">*</span><span class="nx">OrderRequest</span><span class="p">,</span> <span class="nx">opts</span> <span class="o">...</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">CallOption</span><span class="p">)</span> <span class="p">(</span><span class="nx">OrderService_GetOrderInfoClient</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">stream</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">cc</span><span class="p">.</span><span class="nf">NewStream</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">_OrderService_serviceDesc</span><span class="p">.</span><span class="nx">Streams</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#34;/OrderService/GetOrderInfo&#34;</span><span class="p">,</span> <span class="nx">opts</span><span class="o">...</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">x</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">orderServiceGetOrderInfoClient</span><span class="p">{</span><span class="nx">stream</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ClientStream</span><span class="p">.</span><span class="nf">SendMsg</span><span class="p">(</span><span class="nx">in</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ClientStream</span><span class="p">.</span><span class="nf">CloseSend</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">x</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">OrderService_GetOrderInfoClient</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Recv</span><span class="p">()</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ClientStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">orderServiceGetOrderInfoClient</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ClientStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">orderServiceGetOrderInfoClient</span><span class="p">)</span> <span class="nf">Recv</span><span class="p">()</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">OrderInfo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ClientStream</span><span class="p">.</span><span class="nf">RecvMsg</span><span class="p">(</span><span class="nx">m</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">m</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúçÂä°Âô®ËøôËæπ‰πüÊòØÔºåÂ§ö‰∫Ü‰∏Ä‰∏™sendÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// OrderServiceServer is the server API for OrderService service.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">OrderServiceServer</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">GetOrderInfo</span><span class="p">(</span><span class="o">*</span><span class="nx">OrderRequest</span><span class="p">,</span> <span class="nx">OrderService_GetOrderInfoServer</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// UnimplementedOrderServiceServer can be embedded to have forward compatible implementations.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">UnimplementedOrderServiceServer</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">UnimplementedOrderServiceServer</span><span class="p">)</span> <span class="nf">GetOrderInfo</span><span class="p">(</span><span class="o">*</span><span class="nx">OrderRequest</span><span class="p">,</span> <span class="nx">OrderService_GetOrderInfoServer</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">status</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="nx">codes</span><span class="p">.</span><span class="nx">Unimplemented</span><span class="p">,</span> <span class="s">&#34;method GetOrderInfo not implemented&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">RegisterOrderServiceServer</span><span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">Server</span><span class="p">,</span> <span class="nx">srv</span> <span class="nx">OrderServiceServer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span><span class="p">.</span><span class="nf">RegisterService</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">_OrderService_serviceDesc</span><span class="p">,</span> <span class="nx">srv</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">_OrderService_GetOrderInfo_Handler</span><span class="p">(</span><span class="nx">srv</span> <span class="kd">interface</span><span class="p">{},</span> <span class="nx">stream</span> <span class="nx">grpc</span><span class="p">.</span><span class="nx">ServerStream</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">OrderRequest</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">stream</span><span class="p">.</span><span class="nf">RecvMsg</span><span class="p">(</span><span class="nx">m</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">srv</span><span class="p">.(</span><span class="nx">OrderServiceServer</span><span class="p">).</span><span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">orderServiceGetOrderInfoServer</span><span class="p">{</span><span class="nx">stream</span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">OrderService_GetOrderInfoServer</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Send</span><span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ServerStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">orderServiceGetOrderInfoServer</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ServerStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">orderServiceGetOrderInfoServer</span><span class="p">)</span> <span class="nf">Send</span><span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ServerStream</span><span class="p">.</span><span class="nf">SendMsg</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="ÊúçÂä°Âô®">ÊúçÂä°Âô®</h5>
<p>Áî±‰∫éÊúçÂä°Âô®Áî®ÁöÑÊµÅÂΩ¢ÂºèÂõû‰º†ÔºåÊâÄ‰ª•ÂèÇÊï∞‰∏≠Â∏¶ÊúâOrderService_GetOrderInfoServerËøô‰∏™Âê´ÊúâsendÊñπÊ≥ïÁöÑÊé•Âè£ÔºåÁî®‰∫é‰º†ËæìÊµÅ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">OrderService_GetOrderInfoServer</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Send</span><span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ServerStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">os</span> <span class="o">*</span><span class="nx">OrderServiceImpl</span><span class="p">)</span> <span class="nf">GetOrderInfos</span><span class="p">(</span><span class="nx">request</span> <span class="o">*</span><span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderRequest</span><span class="p">,</span> <span class="nx">stream</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderService_GetOrderInfoServer</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34; ÊúçÂä°Á´ØÊµÅ RPC Ê®°Âºè&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">orderMap</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;201907300001&#34;</span><span class="p">:</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907300001&#34;</span><span class="p">,</span> <span class="nx">OrderName</span><span class="p">:</span> <span class="s">&#34;Ë°£Êúç&#34;</span><span class="p">,</span> <span class="nx">OrderStatus</span><span class="p">:</span> <span class="s">&#34;Â∑≤‰ªòÊ¨æ&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;201907310001&#34;</span><span class="p">:</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907310001&#34;</span><span class="p">,</span> <span class="nx">OrderName</span><span class="p">:</span> <span class="s">&#34;Èõ∂È£ü&#34;</span><span class="p">,</span> <span class="nx">OrderStatus</span><span class="p">:</span> <span class="s">&#34;Â∑≤‰ªòÊ¨æ&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;201907310002&#34;</span><span class="p">:</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907310002&#34;</span><span class="p">,</span> <span class="nx">OrderName</span><span class="p">:</span> <span class="s">&#34;È£üÂìÅ&#34;</span><span class="p">,</span> <span class="nx">OrderStatus</span><span class="p">:</span> <span class="s">&#34;Êú™‰ªòÊ¨æ&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">info</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">orderMap</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Unix</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">TimeStamp</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ËÆ¢ÂçïÂ∫èÂàóÂè∑IDÔºö&#34;</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ËÆ¢ÂçïËØ¶ÊÉÖÔºö&#34;</span><span class="p">,</span> <span class="nx">info</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="c1">//ÈÄöËøáÊµÅÊ®°ÂºèÂèëÈÄÅÁªôÂÆ¢Êà∑Á´Ø
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="nx">stream</span><span class="p">.</span><span class="nf">Send</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">info</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúçÂä°ÁöÑÁõëÂê¨‰∏éÂ§ÑÁêÜ‰∏éÂâçÊñáÊâÄÂ≠¶ÂÜÖÂÆπÊ≤°ÊúâÂå∫Âà´Ôºå‰æùÁÑ∂ÊòØÁõ∏ÂêåÁöÑÊ≠•È™§:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">server</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">NewServer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">streamRpc</span><span class="p">.</span><span class="nf">RegisterOrderServiceServer</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span><span class="nb">new</span><span class="p">(</span><span class="nx">OrderServiceImpl</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nx">listen</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;:8081&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">server</span><span class="p">.</span><span class="nf">Serve</span><span class="p">(</span><span class="nx">listen</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="ÂÆ¢Êà∑Á´Ø">ÂÆ¢Êà∑Á´Ø</h5>
<p>ÊúçÂä°Á´Ø‰ΩøÁî®SendÊñπÊ≥ïÂ∞ÜÊï∞ÊçÆ‰ª•ÊµÅÁöÑÂΩ¢ÂºèËøõË°åÂèëÈÄÅÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•‰ΩøÁî®Recv()ÊñπÊ≥ïÊé•Êî∂ÊµÅÊï∞ÊçÆ,<strong>Âõ†‰∏∫Êï∞ÊçÆÊµÅÂ§±Ê∫êÊ∫ê‰∏çÊñ≠ÁöÑ</strong>ÔºåÂõ†Ê≠§‰ΩøÁî®forÊó†ÈôêÂæ™ÁéØÂÆûÁé∞Êï∞ÊçÆÊµÅÁöÑËØªÂèñÔºåÂΩìËØªÂèñÂà∞io.EOFÊó∂ÔºåË°®Á§∫ÊµÅÊï∞ÊçÆÁªìÊùü„ÄÇÂÆ¢Êà∑Á´ØÊï∞ÊçÆËØªÂèñÂÆûÁé∞Â¶Ç‰∏ã</p>
<p>ÂÖàËøòÊòØÊã®Âè∑Âà∞ÊåáÂÆöÁ´ØÂè£ÔºåÁÑ∂ÂêéÂ∞±ÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™clientË∞ÉÁî®ÊúçÂä°ÔºåÊúçÂä°‰ºöËøîÂõû‰∏Ä‰∏™OrderService_GetOrderInfoClientÔºåËØ•Êé•Âè£ÂÆûÁé∞‰∫ÜRecvÔºåÊàë‰ª¨Áõ¥Êé•Ë∞ÉÁî®RecvÊñπÊ≥ïÊé•Âèó‰ø°ÊÅØÂç≥ÂèØ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;context&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;goTrip/streamRpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;google.golang.org/grpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;time&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">conn</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">Dial</span><span class="p">(</span><span class="s">&#34;localhost:8081&#34;</span><span class="p">,</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">WithInsecure</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">defer</span> <span class="nx">conn</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">client</span> <span class="o">:=</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nf">NewOrderServiceClient</span><span class="p">(</span><span class="nx">conn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">req</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderRequest</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">OrderId</span><span class="p">:</span>   <span class="s">&#34;201907300001&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">TimeStamp</span><span class="p">:</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Unix</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">stream</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span> <span class="nx">req</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">recv</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">stream</span><span class="p">.</span><span class="nf">Recv</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">break</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ËØªÂèñÁöÑÊ∂àÊÅØ:&#34;</span><span class="p">,</span><span class="nx">recv</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÂÆ¢Êà∑Á´ØÊµÅÊ®°Âºè">ÂÆ¢Êà∑Á´ØÊµÅÊ®°Âºè</h4>
<h5 id="ÂÆö‰πâprotoÊñá‰ª∂-1">ÂÆö‰πâprotoÊñá‰ª∂</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-protobuf" data-lang="protobuf"><span class="line"><span class="cl"><span class="n">syntax</span> <span class="o">=</span> <span class="s">&#34;proto3&#34;</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">option</span> <span class="n">go_package</span><span class="o">=</span><span class="s">&#34;./;streamRpc&#34;</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c1">//ËÆ¢ÂçïËØ∑Ê±ÇÂèÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">message</span> <span class="nc">OrderRequest</span> <span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">orderId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">int64</span> <span class="n">timeStamp</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c1">//ËÆ¢Âçï‰ø°ÊÅØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">message</span> <span class="nc">OrderInfo</span> <span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">OrderId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">OrderName</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">OrderStatus</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="kd">service</span> <span class="n">OrderService</span> <span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="k">rpc</span> <span class="n">AddOrderList</span> <span class="p">(</span><span class="n">stream</span> <span class="n">OrderRequest</span><span class="p">)</span> <span class="k">returns</span> <span class="p">(</span><span class="n">OrderInfo</span><span class="p">)</span> <span class="p">{};</span> <span class="c1">//ÂÆ¢Êà∑Á´ØÊµÅÊ®°Âºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÁîüÊàêÁöÑÂÆ¢Êà∑Á´ØÊñá‰ª∂</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">OrderServiceClient</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">opts</span> <span class="o">...</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">CallOption</span><span class="p">)</span> <span class="p">(</span><span class="nx">OrderService_GetOrderInfoClient</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">orderServiceClient</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">cc</span> <span class="nx">grpc</span><span class="p">.</span><span class="nx">ClientConnInterface</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">NewOrderServiceClient</span><span class="p">(</span><span class="nx">cc</span> <span class="nx">grpc</span><span class="p">.</span><span class="nx">ClientConnInterface</span><span class="p">)</span> <span class="nx">OrderServiceClient</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">orderServiceClient</span><span class="p">{</span><span class="nx">cc</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">orderServiceClient</span><span class="p">)</span> <span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">opts</span> <span class="o">...</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">CallOption</span><span class="p">)</span> <span class="p">(</span><span class="nx">OrderService_GetOrderInfoClient</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">stream</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">cc</span><span class="p">.</span><span class="nf">NewStream</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">_OrderService_serviceDesc</span><span class="p">.</span><span class="nx">Streams</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#34;/OrderService/GetOrderInfo&#34;</span><span class="p">,</span> <span class="nx">opts</span><span class="o">...</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">x</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">orderServiceGetOrderInfoClient</span><span class="p">{</span><span class="nx">stream</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">x</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">OrderService_GetOrderInfoClient</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Send</span><span class="p">(</span><span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl">	<span class="nf">CloseAndRecv</span><span class="p">()</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ClientStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">orderServiceGetOrderInfoClient</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ClientStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">orderServiceGetOrderInfoClient</span><span class="p">)</span> <span class="nf">Send</span><span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ClientStream</span><span class="p">.</span><span class="nf">SendMsg</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">orderServiceGetOrderInfoClient</span><span class="p">)</span> <span class="nf">CloseAndRecv</span><span class="p">()</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ClientStream</span><span class="p">.</span><span class="nf">CloseSend</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">OrderInfo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ClientStream</span><span class="p">.</span><span class="nf">RecvMsg</span><span class="p">(</span><span class="nx">m</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">m</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>SendAndCloseÂíåRecvÊñπÊ≥ïÊòØÂÆ¢Êà∑Á´ØÊµÅÊ®°Âºè‰∏ãÁöÑÊúçÂä°Á´ØÂØπË±°ÊâÄÊã•ÊúâÁöÑÊñπÊ≥ï„ÄÇ</p>
<p>ÊúçÂä°Âô®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">OrderServiceServer</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">OrderService_GetOrderInfoServer</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// UnimplementedOrderServiceServer can be embedded to have forward compatible implementations.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">UnimplementedOrderServiceServer</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">UnimplementedOrderServiceServer</span><span class="p">)</span> <span class="nf">GetOrderInfo</span><span class="p">(</span><span class="nx">OrderService_GetOrderInfoServer</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">status</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="nx">codes</span><span class="p">.</span><span class="nx">Unimplemented</span><span class="p">,</span> <span class="s">&#34;method GetOrderInfo not implemented&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">RegisterOrderServiceServer</span><span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">Server</span><span class="p">,</span> <span class="nx">srv</span> <span class="nx">OrderServiceServer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span><span class="p">.</span><span class="nf">RegisterService</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">_OrderService_serviceDesc</span><span class="p">,</span> <span class="nx">srv</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">_OrderService_GetOrderInfo_Handler</span><span class="p">(</span><span class="nx">srv</span> <span class="kd">interface</span><span class="p">{},</span> <span class="nx">stream</span> <span class="nx">grpc</span><span class="p">.</span><span class="nx">ServerStream</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">srv</span><span class="p">.(</span><span class="nx">OrderServiceServer</span><span class="p">).</span><span class="nf">GetOrderInfo</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">orderServiceGetOrderInfoServer</span><span class="p">{</span><span class="nx">stream</span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">OrderService_GetOrderInfoServer</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">SendAndClose</span><span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Recv</span><span class="p">()</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderRequest</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ServerStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">orderServiceGetOrderInfoServer</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ServerStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">orderServiceGetOrderInfoServer</span><span class="p">)</span> <span class="nf">SendAndClose</span><span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ServerStream</span><span class="p">.</span><span class="nf">SendMsg</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">orderServiceGetOrderInfoServer</span><span class="p">)</span> <span class="nf">Recv</span><span class="p">()</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderRequest</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">OrderRequest</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ServerStream</span><span class="p">.</span><span class="nf">RecvMsg</span><span class="p">(</span><span class="nx">m</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">m</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>SendÂíåCloseAndRecvÊòØÂÆ¢Êà∑Á´ØÊµÅÊ®°Âºè‰∏ãÁöÑÂÆ¢Êà∑Á´ØÂØπË±°ÊâÄÊã•ÊúâÁöÑÊñπÊ≥ï„ÄÇ</p>
<h5 id="ÊúçÂä°Âô®ÂÆûÁé∞">ÊúçÂä°Âô®ÂÆûÁé∞</h5>
<p>Áî±‰∫é‰ø°ÊÅØÂÖ®Âú®ÊµÅ‰∏≠ÔºåÊâÄ‰ª•‰∏çÈúÄË¶Åreq‰∫Ü„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">os</span> <span class="o">*</span><span class="nx">OrderServiceImpl</span><span class="p">)</span> <span class="nf">AddOrderList</span><span class="p">(</span><span class="nx">stream</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderService_AddOrderListServer</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34; ÂÆ¢Êà∑Á´Ø RPC Ê®°Âºè&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">for</span>  <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">recv</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">stream</span><span class="p">.</span><span class="nf">Recv</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34; ËØªÂèñÊï∞ÊçÆÁªìÊùü &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="nx">result</span> <span class="o">:=</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span><span class="nx">OrderStatus</span><span class="p">:</span> <span class="s">&#34; ËØªÂèñÊï∞ÊçÆÁªìÊùü &#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="nx">stream</span><span class="p">.</span><span class="nf">SendAndClose</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">recv</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁõëÂê¨ÊúçÂä°Âô®‰æùÁÑ∂Â∑Æ‰∏çÂ§ö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">server</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">NewServer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">streamRpc</span><span class="p">.</span><span class="nf">RegisterOrderServiceServer</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span><span class="nb">new</span><span class="p">(</span><span class="nx">OrderServiceImpl</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nx">listen</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;:8081&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">server</span><span class="p">.</span><span class="nf">Serve</span><span class="p">(</span><span class="nx">listen</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="ÂÆ¢Êà∑Á´ØÂÆûÁé∞">ÂÆ¢Êà∑Á´ØÂÆûÁé∞</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;context&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;goTrip/streamRpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;google.golang.org/grpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;time&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">orderMap</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderRequest</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;201907300001&#34;</span><span class="p">:</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderRequest</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907300001&#34;</span><span class="p">,</span><span class="nx">TimeStamp</span><span class="p">:</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Unix</span><span class="p">()},</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;201907310001&#34;</span><span class="p">:</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderRequest</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907310001&#34;</span><span class="p">,</span> <span class="nx">TimeStamp</span><span class="p">:</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Unix</span><span class="p">()},</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;201907310002&#34;</span><span class="p">:</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderRequest</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907310002&#34;</span><span class="p">,</span> <span class="nx">TimeStamp</span><span class="p">:</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Unix</span><span class="p">()},</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">conn</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">Dial</span><span class="p">(</span><span class="s">&#34;localhost:8081&#34;</span><span class="p">,</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">WithInsecure</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">defer</span> <span class="nx">conn</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">client</span> <span class="o">:=</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nf">NewOrderServiceClient</span><span class="p">(</span><span class="nx">conn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">stream</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">AddOrderList</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//Ë∞ÉÁî®ÊñπÊ≥ïÂèëÈÄÅÊµÅÊï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">info</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">orderMap</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">err</span> <span class="p">=</span> <span class="nx">stream</span><span class="p">.</span><span class="nf">Send</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">info</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">orderInfo</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">stream</span><span class="p">.</span><span class="nf">CloseAndRecv</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34; ËØªÂèñÊï∞ÊçÆÁªìÊùü‰∫Ü &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">orderInfo</span><span class="p">.</span><span class="nf">GetOrderStatus</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™‰∫§‰∫íÁ±ª‰ºº‰∫éÔºåÊúçÂä°Âô®‰ºöÈÄöËøárecvÊé•Êî∂ÁÑ∂ÂêéËøõË°å‰∏öÂä°Â§ÑÁêÜÔºåÁÑ∂ÂêéÈÄöËøásendAndCloseËøõË°åÂõû‰º†ÁªìÊûúÔºåclientÈÄöËøásendÂèëÈÄÅÊµÅ‰ø°ÊÅØÔºåÁÑ∂ÂêéÈÄöËøáCloseAndReciveÊé•ÂèóÊ∂àÊÅØ„ÄÇ</p>
<h4 id="ÂèåÂêëÊµÅÊ®°Âºè">ÂèåÂêëÊµÅÊ®°Âºè</h4>
<h5 id="ÂÆö‰πâprotoÊñá‰ª∂-2">ÂÆö‰πâprotoÊñá‰ª∂</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-protobuf" data-lang="protobuf"><span class="line"><span class="cl"><span class="n">syntax</span> <span class="o">=</span> <span class="s">&#34;proto3&#34;</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">option</span> <span class="n">go_package</span><span class="o">=</span><span class="s">&#34;./;streamRpc&#34;</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c1">//ËÆ¢ÂçïËØ∑Ê±ÇÂèÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">message</span> <span class="nc">OrderRequest</span> <span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">orderId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">int64</span> <span class="n">timeStamp</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c1">//ËÆ¢Âçï‰ø°ÊÅØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">message</span> <span class="nc">OrderInfo</span> <span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">OrderId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">OrderName</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="kt">string</span> <span class="n">OrderStatus</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">}</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c1">//ËÆ¢ÂçïÊúçÂä°serviceÂÆö‰πâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">service</span> <span class="n">OrderService</span> <span class="p">{</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>  <span class="k">rpc</span> <span class="n">GetOrderInfos</span> <span class="p">(</span><span class="n">stream</span> <span class="n">OrderRequest</span><span class="p">)</span> <span class="k">returns</span> <span class="p">(</span><span class="n">stream</span> <span class="n">OrderInfo</span><span class="p">)</span> <span class="p">{};</span> <span class="c1">//ÂèåÂêëÊµÅÊ®°Âºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÆ¢Êà∑Á´Ø</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">OrderService_GetOrderInfosClient</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Send</span><span class="p">(</span><span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Recv</span><span class="p">()</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ClientStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">orderServiceGetOrderInfosClient</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ClientStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">orderServiceGetOrderInfosClient</span><span class="p">)</span> <span class="nf">Send</span><span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">OrderRequest</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ClientStream</span><span class="p">.</span><span class="nf">SendMsg</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">orderServiceGetOrderInfosClient</span><span class="p">)</span> <span class="nf">Recv</span><span class="p">()</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">OrderInfo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ClientStream</span><span class="p">.</span><span class="nf">RecvMsg</span><span class="p">(</span><span class="nx">m</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">m</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúçÂä°Âô®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">OrderService_GetOrderInfosServer</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Send</span><span class="p">(</span><span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Recv</span><span class="p">()</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderRequest</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ServerStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">orderServiceGetOrderInfosServer</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">grpc</span><span class="p">.</span><span class="nx">ServerStream</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">orderServiceGetOrderInfosServer</span><span class="p">)</span> <span class="nf">Send</span><span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">OrderInfo</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ServerStream</span><span class="p">.</span><span class="nf">SendMsg</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">orderServiceGetOrderInfosServer</span><span class="p">)</span> <span class="nf">Recv</span><span class="p">()</span> <span class="p">(</span><span class="o">*</span><span class="nx">OrderRequest</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">OrderRequest</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">ServerStream</span><span class="p">.</span><span class="nf">RecvMsg</span><span class="p">(</span><span class="nx">m</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">m</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•ÂèëÁé∞Êó†ËÆ∫ÊòØÊúçÂä°Âô®ËøòÊòØÂÆ¢Êà∑Á´ØÈÉΩÂ¢ûÂä†‰∫ÜrecvÂíåsendÊñπÊ≥ï„ÄÇ</p>
<h5 id="ÊúçÂä°Âô®ÂÆûÁé∞-1">ÊúçÂä°Âô®ÂÆûÁé∞</h5>
<p>ÂèÇÊï∞ÊòØÂÆûÁé∞‰∫ÜrecvÂíåsendÁöÑÊé•Âè£ÔºåÂèØ‰ª•ÂèëÁé∞recvÂíåsendÈÉΩÊîæÂà∞‰∫ÜÂêå‰∏Ä‰∏™for‰∏≠ÔºåÂ¶ÇÊûúËØªÂèñÁªìÊùüËá™Âä®break</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;goTrip/streamRpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;google.golang.org/grpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;net&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">OrderServiceImpl</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ÂÆûÁé∞grpcÂèåÂêëÊµÅÊ®°Âºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">os</span> <span class="o">*</span><span class="nx">OrderServiceImpl</span><span class="p">)</span> <span class="nf">GetOrderInfos</span><span class="p">(</span><span class="nx">stream</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderService_GetOrderInfosServer</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">orderRequest</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">stream</span><span class="p">.</span><span class="nf">Recv</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34; Êï∞ÊçÆËØªÂèñÁªìÊùü &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">orderRequest</span><span class="p">.</span><span class="nf">GetOrderId</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">		<span class="nx">orderMap</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;201907300001&#34;</span><span class="p">:</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907300001&#34;</span><span class="p">,</span> <span class="nx">OrderName</span><span class="p">:</span> <span class="s">&#34;Ë°£Êúç&#34;</span><span class="p">,</span> <span class="nx">OrderStatus</span><span class="p">:</span> <span class="s">&#34;Â∑≤‰ªòÊ¨æ&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;201907310001&#34;</span><span class="p">:</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907310001&#34;</span><span class="p">,</span> <span class="nx">OrderName</span><span class="p">:</span> <span class="s">&#34;Èõ∂È£ü&#34;</span><span class="p">,</span> <span class="nx">OrderStatus</span><span class="p">:</span> <span class="s">&#34;Â∑≤‰ªòÊ¨æ&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;201907310002&#34;</span><span class="p">:</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderInfo</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="s">&#34;201907310002&#34;</span><span class="p">,</span> <span class="nx">OrderName</span><span class="p">:</span> <span class="s">&#34;È£üÂìÅ&#34;</span><span class="p">,</span> <span class="nx">OrderStatus</span><span class="p">:</span> <span class="s">&#34;Êú™‰ªòÊ¨æ&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">result</span> <span class="o">:=</span> <span class="nx">orderMap</span><span class="p">[</span><span class="nx">orderRequest</span><span class="p">.</span><span class="nf">GetOrderId</span><span class="p">()]</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//ÂèëÈÄÅÊï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nx">err</span> <span class="p">=</span> <span class="nx">stream</span><span class="p">.</span><span class="nf">Send</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">server</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">NewServer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">streamRpc</span><span class="p">.</span><span class="nf">RegisterOrderServiceServer</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span><span class="nb">new</span><span class="p">(</span><span class="nx">OrderServiceImpl</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nx">listen</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;:8081&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">server</span><span class="p">.</span><span class="nf">Serve</span><span class="p">(</span><span class="nx">listen</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="ÂÆ¢Êà∑Á´ØÂÆûÁé∞-1">ÂÆ¢Êà∑Á´ØÂÆûÁé∞</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;context&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;goTrip/streamRpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;google.golang.org/grpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//1„ÄÅDailËøûÊé•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">conn</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">Dial</span><span class="p">(</span><span class="s">&#34;localhost:8081&#34;</span><span class="p">,</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">WithInsecure</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">defer</span> <span class="nx">conn</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">orderServiceClient</span> <span class="o">:=</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nf">NewOrderServiceClient</span><span class="p">(</span><span class="nx">conn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇRPCË∞ÉÁî®ÔºöÂèåÂêëÊµÅÊ®°Âºè&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">orderIDs</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;201907300001&#34;</span><span class="p">,</span> <span class="s">&#34;201907310001&#34;</span><span class="p">,</span> <span class="s">&#34;201907310002&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">orderInfoClient</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">orderServiceClient</span><span class="p">.</span><span class="nf">GetOrderInfos</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">orderID</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">orderIDs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">orderRequest</span> <span class="o">:=</span> <span class="nx">streamRpc</span><span class="p">.</span><span class="nx">OrderRequest</span><span class="p">{</span><span class="nx">OrderId</span><span class="p">:</span> <span class="nx">orderID</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="nx">err</span> <span class="o">:=</span> <span class="nx">orderInfoClient</span><span class="p">.</span><span class="nf">Send</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">orderRequest</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//ÂÖ≥Èó≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">orderInfoClient</span><span class="p">.</span><span class="nf">CloseSend</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">orderInfo</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">orderInfoClient</span><span class="p">.</span><span class="nf">Recv</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ËØªÂèñÁªìÊùü&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ËØªÂèñÂà∞ÁöÑ‰ø°ÊÅØÔºö&#34;</span><span class="p">,</span> <span class="nx">orderInfo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="grpcÈ™åËØÅ">grpcÈ™åËØÅ</h3>
<p>gRPC‰∏≠ÈªòËÆ§ÊîØÊåÅ‰∏§ÁßçÊéàÊùÉÊñπÂºè,ÂàÜÂà´ÊòØÔºöSSL/TLSËÆ§ËØÅÊñπÂºè„ÄÅÂü∫‰∫éTokenÁöÑËÆ§ËØÅÊñπÂºè„ÄÇ</p>
<p>SSLÂÖ®Áß∞ÊòØSecure Sockets LayerÔºåÂèàË¢´Áß∞‰πã‰∏∫ÂÆâÂÖ®Â•óÊé•Â≠óÂ±ÇÔºåÊòØ‰∏ÄÁßçÊ†áÂáÜÂÆâÂÖ®ÂçèËÆÆÔºåÁî®‰∫éÂú®ÈÄö‰ø°ËøáÁ®ã‰∏≠Âª∫Á´ãÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Âô®‰πãÈó¥ÁöÑÂä†ÂØÜÈìæÊé•„ÄÇ
TLSÁöÑÂÖ®Áß∞ÊòØTransport Layer SecurityÔºåTLSÊòØSSLÁöÑÂçáÁ∫ßÁâà„ÄÇÂú®‰ΩøÁî®ÁöÑËøáÁ®ã‰∏≠ÔºåÂæÄÂæÄ‰π†ÊÉØ‰∫éÂ∞ÜSSLÂíåTLSÁªÑÂêàÂú®‰∏ÄËµ∑ÂÜô‰ΩúSSL/TLS„ÄÇ
ÁÆÄËÄåË®Ä‰πãÔºåSSL/TLSÊòØ‰∏ÄÁßçÁî®‰∫éÁΩëÁªúÈÄö‰ø°‰∏≠Âä†ÂØÜÁöÑÂÆâÂÖ®ÂçèËÆÆ„ÄÇ</p>
<h4 id="Âü∫‰∫étoken">Âü∫‰∫étoken</h4>
<p>Âú®gRPC‰∏≠ÔºåÂÖÅËÆ∏ÂºÄÂèëËÄÖËá™ÂÆö‰πâËá™Â∑±ÁöÑËÆ§ËØÅËßÑÂàôÔºåÈÄöËøá</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">WithPerRPCCredentials</span><span class="p">(</span><span class="nx">creds</span> <span class="nx">credentials</span><span class="p">.</span><span class="nx">PerRPCCredentials</span><span class="p">)</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•ÁúãÂà∞Êàë‰ª¨ÈúÄË¶ÅÂÆûÁé∞‰∏Ä‰∏™PerRPCCredentialsÊé•Âè£</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">PerRPCCredentials</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// GetRequestMetadata gets the current request metadata, refreshing
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// tokens if required. This should be called by the transport layer on
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// each request, and the data should be populated in headers or other
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// context. If a status code is returned, it will be used as the status
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// for the RPC. uri is the URI of the entry point for the request.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// When supported by the underlying implementation, ctx can be used for
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// timeout and cancellation. Additionally, RequestInfo data will be
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// available via ctx to this call.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// TODO(zhaoq): Define the set of the qualified keys instead of leaving
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// it as an arbitrary string.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">GetRequestMetadata</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">uri</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// RequireTransportSecurity indicates whether the credentials requires
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// transport security.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">RequireTransportSecurity</span><span class="p">()</span> <span class="kt">bool</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨Ëá™Â∑±ÂàõÂª∫‰∏Ä‰∏™ÁªìÊûÑ‰ΩìÂÆûÁé∞‰∏Ä‰∏ãÂêß</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">token</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;context&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">TokenAuthentication</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">ApiKey</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">ApiSecret</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//ÁªÑÁªátoken‰ø°ÊÅØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">TokenAuthentication</span><span class="p">)</span> <span class="nf">GetRequestMetadata</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">uri</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>  <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;apikey&#34;</span><span class="p">:</span> <span class="nx">t</span><span class="p">.</span><span class="nx">ApiKey</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;apisecret&#34;</span><span class="p">:</span> <span class="nx">t</span><span class="p">.</span><span class="nx">ApiSecret</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">},</span><span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//ÊòØÂê¶Âü∫‰∫éTLSËÆ§ËØÅËøõË°åÂÆâÂÖ®‰º†Ëæì
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">TokenAuthentication</span><span class="p">)</span> <span class="nf">RequireTransportSecurity</span><span class="p">()</span>  <span class="kt">bool</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ª•ÂêéÂÆ¢Êà∑Á´ØÂèØ‰ª•ÈÄöËøátokenÊù•ËÆøÈóÆ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">auth</span> <span class="o">:=</span> <span class="nx">TokenAuthentication</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ApiKey</span><span class="p">:</span>    <span class="s">&#34;hello&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ApiSecret</span><span class="p">:</span> <span class="s">&#34;20190812&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">dial</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">Dial</span><span class="p">(</span><span class="s">&#34;localhost:8081&#34;</span><span class="p">,</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">WithPerRPCCredentials</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">auth</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÊúçÂä°Âô®-1">ÊúçÂä°Âô®</h4>
<p>ËøôÈáåÁöÑÊúçÂä°Âô®ÈÄöËøámetadata.FromIncomingContext(ctx)ÔºåËé∑ÂæókeyÔºåsecretÔºåÁÑ∂ÂêéËøõË°åÊ†°È™å„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;goTrip/rpcToken&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;golang.org/x/net/context&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;google.golang.org/grpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;google.golang.org/grpc/codes&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;google.golang.org/grpc/metadata&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;google.golang.org/grpc/status&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;net&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MathManager</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">mm</span> <span class="o">*</span><span class="nx">MathManager</span><span class="p">)</span> <span class="nf">AddMethod</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">request</span> <span class="o">*</span><span class="nx">rpcToken</span><span class="p">.</span><span class="nx">RequestArgs</span><span class="p">)</span> <span class="p">(</span><span class="nx">response</span> <span class="o">*</span><span class="nx">rpcToken</span><span class="p">.</span><span class="nx">Response</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">meta</span><span class="p">,</span> <span class="nx">exist</span> <span class="o">:=</span> <span class="nx">metadata</span><span class="p">.</span><span class="nf">FromIncomingContext</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">!</span><span class="nx">exist</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span><span class="nx">status</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="nx">codes</span><span class="p">.</span><span class="nx">Unauthenticated</span><span class="p">,</span><span class="s">&#34;Êó†token&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">appKey</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">appSecret</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">key</span><span class="p">,</span><span class="nx">ok</span> <span class="o">:=</span> <span class="nx">meta</span><span class="p">[</span><span class="s">&#34;apikey&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">ok</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">appKey</span> <span class="p">=</span> <span class="nx">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">secret</span><span class="p">,</span><span class="nx">ok</span> <span class="o">:=</span> <span class="nx">meta</span><span class="p">[</span><span class="s">&#34;apisecret&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">ok</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">appSecret</span> <span class="p">=</span> <span class="nx">secret</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">appKey</span><span class="p">,</span><span class="nx">appSecret</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//ÊéßÂà∂token
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="nx">appKey</span> <span class="o">!=</span> <span class="s">&#34;hello&#34;</span> <span class="o">||</span> <span class="nx">appSecret</span> <span class="o">!=</span> <span class="s">&#34;20190812&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">status</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="nx">codes</span><span class="p">.</span><span class="nx">Unauthenticated</span><span class="p">,</span> <span class="s">&#34;Token ‰∏çÂêàÊ≥ï&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34; ÊúçÂä°Á´Ø AddÊñπÊ≥ï &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">result</span> <span class="o">:=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">Args1</span> <span class="o">+</span> <span class="nx">request</span><span class="p">.</span><span class="nx">Args2</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34; ËÆ°ÁÆóÁªìÊûúÊòØÔºö&#34;</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">response</span> <span class="p">=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">rpcToken</span><span class="p">.</span><span class="nx">Response</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">response</span><span class="p">.</span><span class="nx">Code</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">response</span><span class="p">.</span><span class="nx">Message</span> <span class="p">=</span> <span class="s">&#34;ÊâßË°åÊàêÂäü&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">response</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">server</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">NewServer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">rpcToken</span><span class="p">.</span><span class="nf">RegisterMathServiceServer</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span><span class="nb">new</span><span class="p">(</span><span class="nx">MathManager</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nx">listen</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;:8081&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">server</span><span class="p">.</span><span class="nf">Serve</span><span class="p">(</span><span class="nx">listen</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÂÆ¢Êà∑Á´Ø-1">ÂÆ¢Êà∑Á´Ø</h4>
<p>Ë¶ÅÊ≥®ÊÑè grpc.Dial(&ldquo;localhost:8081&rdquo;, grpc.WithPerRPCCredentials(tk),grpc.WithInsecure())ÔºåÂ¶ÇÊûúÂè™Áî®tokenÈúÄË¶ÅÁî®grpc.WithInsecure()</p>
<p>Âê¶Âàô‰ºöÊä•Èîô„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;context&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;goTrip/rpcToken&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;goTrip/rpcToken/token&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;google.golang.org/grpc&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;log&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="nx">tk</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">token</span><span class="p">.</span><span class="nx">TokenAuthentication</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">ApiKey</span><span class="p">:</span>    <span class="s">&#34;hello&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">ApiSecret</span><span class="p">:</span> <span class="s">&#34;20190812&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="nx">dial</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">Dial</span><span class="p">(</span><span class="s">&#34;localhost:8081&#34;</span><span class="p">,</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">WithPerRPCCredentials</span><span class="p">(</span><span class="nx">tk</span><span class="p">),</span><span class="nx">grpc</span><span class="p">.</span><span class="nf">WithInsecure</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">      <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="nx">client</span> <span class="o">:=</span> <span class="nx">rpcToken</span><span class="p">.</span><span class="nf">NewMathServiceClient</span><span class="p">(</span><span class="nx">dial</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="nx">req</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">rpcToken</span><span class="p">.</span><span class="nx">RequestArgs</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">Args1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">Args2</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="nx">resp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">AddMethod</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span> <span class="nx">req</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">      <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nf">GetCode</span><span class="p">(),</span><span class="nx">resp</span><span class="p">.</span><span class="nf">GetMessage</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="grpcÊã¶Êà™Âô®">grpcÊã¶Êà™Âô®</h3>
<p>Âú®‰∏äËäÇËØæÁ®ã‰∏≠ÔºåÊàë‰ª¨Â≠¶‰π†‰ΩøÁî®‰∫ÜgRPCÊ°ÜÊû∂‰∏≠ÁöÑ‰∏§ÁßçËÆ§ËØÅÊñπÂºèÔºöTLSÈ™åËØÅÂíåTokenÈ™åËØÅ„ÄÇ</p>
<p>‰ΩÜÊòØÔºåÂú®ÊúçÂä°Á´ØÁöÑÊñπÊ≥ï‰∏≠ÔºåÊØè‰∏™ÊñπÊ≥ïÈÉΩË¶ÅËøõË°åtokenÁöÑÂà§Êñ≠„ÄÇÁ®ãÂ∫èÊïàÁéáÂ§™‰ΩéÔºåÂèØ‰ª•‰ºòÂåñ‰∏Ä‰∏ãÂ§ÑÁêÜÈÄªËæëÔºåÂú®Ë∞ÉÁî®ÊúçÂä°Á´ØÁöÑÂÖ∑‰ΩìÊñπÊ≥ï‰πãÂâçÔºåÂÖàËøõË°åÊã¶Êà™ÔºåÂπ∂ËøõË°åtokenÈ™åËØÅÂà§Êñ≠ÔºåËøôÁßçÊñπÂºèÁß∞‰πã‰∏∫Êã¶Êà™Âô®Â§ÑÁêÜ„ÄÇ</p>
<p>Èô§‰∫ÜÊ≠§Â§ÑÁöÑtokenÈ™åËØÅÂà§Êñ≠Â§ÑÁêÜ‰ª•Â§ñÔºåËøòÂèØ‰ª•ËøõË°åÊó•ÂøóÂ§ÑÁêÜÁ≠â„ÄÇ</p>
<p>‰ΩøÁî®Êã¶Êà™Âô®ÔºåÈ¶ñÂÖàÈúÄË¶ÅÊ≥®ÂÜå„ÄÇÂú®grpc‰∏≠ÁºñÁ®ãÂÆûÁé∞‰∏≠ÔºåÂèØ‰ª•Âú®NewSeverÊó∂Ê∑ªÂä†Êã¶Êà™Âô®ËÆæÁΩÆÔºågrpcÊ°ÜÊû∂‰∏≠ÂèØ‰ª•ÈÄöËøáUnaryInterceptorÊñπÊ≥ïËÆæÁΩÆËá™ÂÆö‰πâÁöÑÊã¶Êà™Âô®ÔºåÂπ∂ËøîÂõûServerOption„ÄÇÂÖ∑‰Ωì‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">grpc</span><span class="p">.</span><span class="nf">UnaryInterceptor</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÇπËøõÂéªÂèëÁé∞ÈúÄË¶Å‰∏Ä‰∏™ÂáΩÊï∞</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">UnaryServerInterceptor</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">req</span> <span class="kd">interface</span><span class="p">{},</span> <span class="nx">info</span> <span class="o">*</span><span class="nx">UnaryServerInfo</span><span class="p">,</span> <span class="nx">handler</span> <span class="nx">UnaryHandler</span><span class="p">)</span> <span class="p">(</span><span class="nx">resp</span> <span class="kd">interface</span><span class="p">{},</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨ÊåâËá™Â∑±ÁöÑÈÄªËæëÂÆûÁé∞Â∞±Â•Ω‰∫Ü„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">TokenInterceptor</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">req</span> <span class="kd">interface</span><span class="p">{},</span> <span class="nx">info</span> <span class="o">*</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">UnaryServerInfo</span><span class="p">,</span> <span class="nx">handler</span> <span class="nx">grpc</span><span class="p">.</span><span class="nx">UnaryHandler</span><span class="p">)</span> <span class="p">(</span><span class="nx">resp</span> <span class="kd">interface</span><span class="p">{},</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//ÈÄöËøámetadata
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">md</span><span class="p">,</span> <span class="nx">exist</span> <span class="o">:=</span> <span class="nx">metadata</span><span class="p">.</span><span class="nf">FromIncomingContext</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">!</span><span class="nx">exist</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">status</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="nx">codes</span><span class="p">.</span><span class="nx">Unauthenticated</span><span class="p">,</span> <span class="s">&#34;Êó†TokenËÆ§ËØÅ‰ø°ÊÅØ&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">appKey</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">appSecret</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">md</span><span class="p">[</span><span class="s">&#34;apikey&#34;</span><span class="p">];</span> <span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">appKey</span> <span class="p">=</span> <span class="nx">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">secret</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">md</span><span class="p">[</span><span class="s">&#34;apisecret&#34;</span><span class="p">];</span> <span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">appSecret</span> <span class="p">=</span> <span class="nx">secret</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">appKey</span> <span class="o">!=</span> <span class="s">&#34;hello&#34;</span> <span class="o">||</span> <span class="nx">appSecret</span> <span class="o">!=</span> <span class="s">&#34;20190812&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">status</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="nx">codes</span><span class="p">.</span><span class="nx">Unauthenticated</span><span class="p">,</span> <span class="s">&#34;Token ‰∏çÂêàÊ≥ï&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//ÊúâÁÇπÂÉèjavaÁöÑdoFilterÔºåÂêë‰∏ãÊâßË°åÁöÑÊÑèÊÄù
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="nf">handler</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="nx">req</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂΩìÁÑ∂ÂÖâÂÜô‰∫ÜÊã¶Êà™ÊñπÊ≥ï‰∏çË°åÔºåÊàë‰ª¨ÂæóÊ≥®ÂÜåÂà∞ÊúçÂä°Âô®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl">	<span class="nx">server</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">NewServer</span><span class="p">(</span><span class="nx">grpc</span><span class="p">.</span><span class="nf">UnaryInterceptor</span><span class="p">(</span><span class="nx">TokenInterceptor</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êï¥‰Ωì‰ª£Á†ÅÔºö</p>
<h4 id="ÊúçÂä°Âô®-2">ÊúçÂä°Âô®</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;goTrip/rpcToken&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;golang.org/x/net/context&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;google.golang.org/grpc&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;google.golang.org/grpc/codes&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;google.golang.org/grpc/metadata&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;google.golang.org/grpc/status&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;net&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MathManager</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">TokenInterceptor</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">req</span> <span class="kd">interface</span><span class="p">{},</span> <span class="nx">info</span> <span class="o">*</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">UnaryServerInfo</span><span class="p">,</span> <span class="nx">handler</span> <span class="nx">grpc</span><span class="p">.</span><span class="nx">UnaryHandler</span><span class="p">)</span> <span class="p">(</span><span class="nx">resp</span> <span class="kd">interface</span><span class="p">{},</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">   <span class="c1">//ÈÄöËøámetadata
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="nx">md</span><span class="p">,</span> <span class="nx">exist</span> <span class="o">:=</span> <span class="nx">metadata</span><span class="p">.</span><span class="nf">FromIncomingContext</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="k">if</span> <span class="p">!</span><span class="nx">exist</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">status</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="nx">codes</span><span class="p">.</span><span class="nx">Unauthenticated</span><span class="p">,</span> <span class="s">&#34;Êó†TokenËÆ§ËØÅ‰ø°ÊÅØ&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="kd">var</span> <span class="nx">appKey</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">   <span class="kd">var</span> <span class="nx">appSecret</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">   <span class="k">if</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">md</span><span class="p">[</span><span class="s">&#34;apikey&#34;</span><span class="p">];</span> <span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">appKey</span> <span class="p">=</span> <span class="nx">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="k">if</span> <span class="nx">secret</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">md</span><span class="p">[</span><span class="s">&#34;apisecret&#34;</span><span class="p">];</span> <span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">appSecret</span> <span class="p">=</span> <span class="nx">secret</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="k">if</span> <span class="nx">appKey</span> <span class="o">!=</span> <span class="s">&#34;hello&#34;</span> <span class="o">||</span> <span class="nx">appSecret</span> <span class="o">!=</span> <span class="s">&#34;20190812&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">status</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="nx">codes</span><span class="p">.</span><span class="nx">Unauthenticated</span><span class="p">,</span> <span class="s">&#34;Token ‰∏çÂêàÊ≥ï&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="nf">handler</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="nx">req</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">mm</span> <span class="o">*</span><span class="nx">MathManager</span><span class="p">)</span> <span class="nf">AddMethod</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">request</span> <span class="o">*</span><span class="nx">rpcToken</span><span class="p">.</span><span class="nx">RequestArgs</span><span class="p">)</span> <span class="p">(</span><span class="nx">response</span> <span class="o">*</span><span class="nx">rpcToken</span><span class="p">.</span><span class="nx">Response</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="c1">//meta, exist := metadata.FromIncomingContext(ctx)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//if !exist{
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">// return nil,status.Errorf(codes.Unauthenticated,&#34;Êó†token&#34;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//var appKey string
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//var appSecret string
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//key,ok := meta[&#34;apikey&#34;]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//if ok{
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">// appKey = key[0]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//secret,ok := meta[&#34;apisecret&#34;]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//if ok{
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">// appSecret = secret[0]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//fmt.Println(appKey,appSecret)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">////ÊéßÂà∂token
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//if appKey != &#34;hello&#34; || appSecret != &#34;20190812&#34; {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">// return nil, status.Errorf(codes.Unauthenticated, &#34;Token ‰∏çÂêàÊ≥ï&#34;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">//}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34; ÊúçÂä°Á´Ø AddÊñπÊ≥ï &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="nx">result</span> <span class="o">:=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">Args1</span> <span class="o">+</span> <span class="nx">request</span><span class="p">.</span><span class="nx">Args2</span>
</span></span><span class="line"><span class="cl">   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34; ËÆ°ÁÆóÁªìÊûúÊòØÔºö&#34;</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="nx">response</span> <span class="p">=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">rpcToken</span><span class="p">.</span><span class="nx">Response</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="nx">response</span><span class="p">.</span><span class="nx">Code</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="nx">response</span><span class="p">.</span><span class="nx">Message</span> <span class="p">=</span> <span class="s">&#34;ÊâßË°åÊàêÂäü&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="nx">response</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="nx">server</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">NewServer</span><span class="p">(</span><span class="nx">grpc</span><span class="p">.</span><span class="nf">UnaryInterceptor</span><span class="p">(</span><span class="nx">TokenInterceptor</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">   <span class="nx">rpcToken</span><span class="p">.</span><span class="nf">RegisterMathServiceServer</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span><span class="nb">new</span><span class="p">(</span><span class="nx">MathManager</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">   <span class="nx">listen</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;:8081&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="nx">server</span><span class="p">.</span><span class="nf">Serve</span><span class="p">(</span><span class="nx">listen</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÂÆ¢Êà∑Á´Ø-2">ÂÆ¢Êà∑Á´Ø</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;context&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;goTrip/rpcToken&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;goTrip/rpcToken/token&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;google.golang.org/grpc&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;log&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">tk</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">token</span><span class="p">.</span><span class="nx">TokenAuthentication</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ApiKey</span><span class="p">:</span>    <span class="s">&#34;hello&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ApiSecret</span><span class="p">:</span> <span class="s">&#34;20190812&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">dial</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">Dial</span><span class="p">(</span><span class="s">&#34;localhost:8081&#34;</span><span class="p">,</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">WithPerRPCCredentials</span><span class="p">(</span><span class="nx">tk</span><span class="p">),</span><span class="nx">grpc</span><span class="p">.</span><span class="nf">WithInsecure</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">client</span> <span class="o">:=</span> <span class="nx">rpcToken</span><span class="p">.</span><span class="nf">NewMathServiceClient</span><span class="p">(</span><span class="nx">dial</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">req</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">rpcToken</span><span class="p">.</span><span class="nx">RequestArgs</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Args1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Args2</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">resp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">AddMethod</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span> <span class="nx">req</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nf">GetCode</span><span class="p">(),</span><span class="nx">resp</span><span class="p">.</span><span class="nf">GetMessage</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚Äã</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/blog/tags/golang/">Golang</a>
        
            <a href="/blog/tags/grpc/">GRPC</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/blog/posts/gin/">
        
        
            <div class="article-image">
                <img src="/blog/posts/gin/_hu7f5d8dacba1592bb3a5cf38c96474382_14659_e68df950acabd0155bf55f83e3624d63.png" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Â≠¶‰π†Gin"
                        
                        data-hash="md5-3SDIzGsO9XH1zGvuc0lwvQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Â≠¶‰π†Gin</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2022 - 
        
        2023 ËèúGOÁöÑÂçöÂÆ¢
    </section>
    
    <section class="powerby">
        
            welcome to my blog,here we can study together <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/blog/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
